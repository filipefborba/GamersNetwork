function CompletePlayerRender(){var e=this;this.requests=[],this.componentRoot=".complete-player",this.template=void 0,this.templateSrc="#completePlayerTemplate",this.templateTarget=".content",this.templateDisclaimer=".disclaimer",this.templateModal="#completePlayerModalTemplate",this.templateModalTarget=".complete-player-modal",this.disclaimerOmitCookieName="gc_complete_player_disclaimer_omit",this.tempData=[],this.disableSounds="true"==GamersClub.player.settings.lobby_complete_sounds,this.sounds={received:function(){try{document.getElementById("soundCompletePlayerReceived").play()}catch(e){}},accepted:function(){try{document.getElementById("soundCompletePlayerAccepted").play()}catch(e){}}},this.rankedGroup=[{name:"Lobby","class":"lobby"},{name:"Open","class":"open"},{name:"Qualify","class":"qualify"},{name:"Pro","class":"pro"},{name:"Challenge","class":"challenge"}];var t=new SimpleModal({modalContainer:"#completePlayerModal",acceptButtonAction:this.confirmOpenGame.bind(this)});this.modal=t,$(this.templateTarget).on("click",".accept-btn",function(n){var i=$(this).data("id").split("-");t.show(e.renderModal(i[0],i[1])),e.tempData=i,setTimeout(function(){t.getModal().querySelector(".complete-player-modal").classList.add("show")},50)}),$(this.templateTarget).on("click",".refuse-btn",function(t){t.stopPropagation();var n=$(this).data("id").split("-");e.deleteRequest(n[0],n[1])})}function toggleLiveItem(e){"object"==typeof window.headerAppTransporter&&headerAppTransporter.toggleLiveItem(e)}function processAdminNotification(e){e=JSON.parse(e);var t={timeout:e.timeout,killer:!0,layout:"topCenter",closeWith:["button"]};return t.theme="important",e.timeout&&(t.timeout=e.timeout),e.killer&&(t.killer=1==e.killer),e.title&&(t.text="<h2>"+e.title+"</h2>"),e.description&&(t.text+=e.description),e.link&&(e.btn_text?t.text+="<a class='noty_important_cta' href='"+e.link+"'>"+e.btn_text+"</a>":t.text+="<a class='noty_important_cta' href='"+e.link+"'>Clique Aqui</a>"),e.image&&(t.text+="<img class='noty_notification_image' src='"+e.image+"'>",t.theme+="-image"),t}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():e.io=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e,t){"object"===("undefined"==typeof e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var n,i=r(e),s=i.source,p=i.id,u=i.path,h=l[p]&&u in l[p].nsps,d=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return d?(c("ignoring socket cache for %s",s),n=a(s,t)):(l[p]||(c("new io instance for %s",s),l[p]=a(s,t)),n=l[p]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1),s=n(7),a=n(13),c=n(3)("socket.io-client");e.exports=t=i;var l=t.managers={};t.protocol=s.protocol,t.connect=i,t.Manager=n(13),t.Socket=n(37)},function(e,t,n){(function(t){"use strict";function i(e,n){var i=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e="undefined"!=typeof n?n.protocol+"//"+e:"https://"+e),r("parse %s",e),i=o(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=i.host.indexOf(":")!==-1,a=s?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port,i.href=i.protocol+"://"+a+(n&&n.port===i.port?"":":"+i.port),i}var o=n(2),r=n(3)("socket.io-client:url");e.exports=i}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),r=e.indexOf("]");o!=-1&&r!=-1&&(e=e.substring(0,o)+e.substring(o,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=n.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return o!=-1&&r!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){(function(i){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function c(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!=typeof i&&"env"in i&&(e=i.env.DEBUG),e}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(5),t.log=s,t.formatArgs=r,t.save=a,t.load=c,t.useColors=o,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(c())}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?f=d.concat(f):b=-1,f.length&&a())}function a(){if(!y){var e=o(s);y=!0;for(var t=f.length;t;){for(d=f,f=[];++b<t;)d&&d[b].run();b=-1,t=f.length}d=null,y=!1,r(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,u,h=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var d,f=[],y=!1,b=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){function i(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function o(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(l||i);e.diff=o,e.prev=l,e.curr=i,l=i;for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;a++;var o=t.formatters[i];if("function"==typeof o){var s=r[a];n=o.call(e,s),r.splice(a,1),a--}return n}),t.formatArgs.call(e,r);var c=n.log||t.log||console.log.bind(console);c.apply(e,r)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=i(e),"function"==typeof t.init&&t.init(n),n}function r(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o["default"]=o,t.coerce=c,t.disable=s,t.enable=r,t.enabled=a,t.humanize=n(6),t.names=[],t.skips=[],t.formatters={};var l},function(e,t){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*p;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return r(e,l,"day")||r(e,c,"hour")||r(e,a,"minute")||r(e,s,"second")||e+" ms"}function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,l=24*c,p=365.25*l;e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&isNaN(e)===!1)return t["long"]?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function i(){}function o(e){var n=""+e.type;return t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data&&(n+=JSON.stringify(e.data)),u("encoded %j as %s",e,n),n}function r(e,t){function n(e){var n=f.deconstructPacket(e),i=o(n.packet),r=n.buffers;r.unshift(i),t(r)}f.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return p();if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){var r=e.charAt(n);if(","===r)break;if(i.nsp+=r,n===e.length)break}else i.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var r=e.charAt(n);if(null==r||Number(r)!=r){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}return e.charAt(++n)&&(i=c(i,e.substr(n))),u("decoded %s as %j",e,i),i}function c(e,t){try{e.data=JSON.parse(t)}catch(n){return p()}return e}function l(e){this.reconPack=e,this.buffers=[]}function p(){return{type:t.ERROR,data:"parser error"}}var u=n(3)("socket.io-parser"),h=n(8),d=n(9),f=n(11),y=n(12);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=i,t.Decoder=s,i.prototype.encode=function(e,n){if(e.type!==t.EVENT&&e.type!==t.ACK||!d(e.data)||(e.type=e.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),u("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)r(e,n);else{var i=o(e);n([i])}},h(s.prototype),s.prototype.add=function(e){var n;if("string"==typeof e)n=a(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new l(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!y(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function i(e){if(e)return o(e)}function o(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===t||i.fn===t){n.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(t){function i(e){if(!e||"object"!=typeof e)return!1;if(o(e)){for(var n=0,r=e.length;n<r;n++)if(i(e[n]))return!0;return!1}if("function"==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||"function"==typeof t.ArrayBuffer&&e instanceof ArrayBuffer||s&&e instanceof Blob||a&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return i(e.toJSON(),!0);for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)&&i(e[c]))return!0;return!1}var o=n(10),r=Object.prototype.toString,s="function"==typeof t.Blob||"[object BlobConstructor]"===r.call(t.Blob),a="function"==typeof t.File||"[object FileConstructor]"===r.call(t.File);e.exports=i}).call(t,function(){return this}())},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){function i(e,t){if(!e)return e;if(s(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var o=new Array(e.length),a=0;a<e.length;a++)o[a]=i(e[a],t);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var c in e)o[c]=i(e[c],t);return o}return e}function o(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=o(e[n],t);else if("object"==typeof e)for(var i in e)e[i]=o(e[i],t);return e}var r=n(10),s=n(12),a=Object.prototype.toString,c="function"==typeof e.Blob||"[object BlobConstructor]"===a.call(e.Blob),l="function"==typeof e.File||"[object FileConstructor]"===a.call(e.File);t.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=i(n,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){function n(e,a,p){if(!e)return e;if(c&&e instanceof Blob||l&&e instanceof File){i++;var u=new FileReader;u.onload=function(){p?p[a]=this.result:o=this.result,--i||t(o)},u.readAsArrayBuffer(e)}else if(r(e))for(var h=0;h<e.length;h++)n(e[h],h,e);else if("object"==typeof e&&!s(e))for(var d in e)n(e[d],d,e)}var i=0,o=e;n(o),i||t(o)}}).call(t,function(){return this}())},function(e,t){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);e&&"object"===("undefined"==typeof e?"undefined":o(e))&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(14),s=n(37),a=n(8),c=n(7),l=n(39),p=n(40),u=n(3)("socket.io-client:manager"),h=n(36),d=n(41),f=Object.prototype.hasOwnProperty;e.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},i.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=l(n,"open",function(){i.onopen(),e&&e()}),s=l(n,"error",function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var c=setTimeout(function(){u("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",p(this,"ondata"))),this.subs.push(l(e,"ping",p(this,"onping"))),this.subs.push(l(e,"pong",p(this,"onpong"))),this.subs.push(l(e,"error",p(this,"onerror"))),this.subs.push(l(e,"close",p(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",p(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},i.prototype.socket=function(e,t){function n(){~h(o.connecting,i)||o.connecting.push(i)}var i=this.nsps[e];if(!i){i=new s(this,e,t),this.nsps[e]=i;var o=this;i.on("connecting",n),i.on("connect",function(){i.id=o.generateId(e)}),this.autoConnect&&n()}return i},i.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},i.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(15),e.exports.parser=n(22)},function(e,t,n){(function(t){function i(e,n){if(!(this instanceof i))return new i(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=p(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=p(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof t&&t;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r=n(16),s=n(8),a=n(3)("engine.io-client:socket"),c=n(36),l=n(22),p=n(2),u=n(30);e.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=n(21),i.transports=n(16),i.parser=n(22),i.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=l.protocol,t.transport=e;var n=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var i=new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return i},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;u=u||t}u||(a('probe transport "%s" opened',e),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(t){if(!u)if("pong"===t.type&&"probe"===t.data){if(a('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",p),!p)return;i.priorWebsocketSuccess="websocket"===p.name,a('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){u||"closed"!==h.readyState&&(a("changing transport and sending upgrade packet"),l(),h.setTransport(p),p.send([{type:"upgrade"}]),h.emit("upgrade",p),p=null,h.upgrading=!1,h.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=p.name,h.emit("upgradeError",n)}}))}function n(){u||(u=!0,l(),p.close(),p=null)}function o(t){var i=new Error("probe error: "+t);i.transport=p.name,n(),a('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",i)}function r(){o("transport closed")}function s(){o("socket closed")}function c(e){p&&e.name!==p.name&&(a('"%s" works - aborting "%s"',e.name,p.name),n())}function l(){p.removeListener("open",t),p.removeListener("error",o),p.removeListener("close",r),h.removeListener("close",s),h.removeListener("upgrading",c)}a('probing transport "%s"',e);var p=this.createTransport(e,{probe:1}),u=!1,h=this;i.priorWebsocketSuccess=!1,p.once("open",t),p.once("error",o),p.once("close",r),this.once("close",s),this.once("upgrading",c),p.open()},i.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},i.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),
this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),a("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){a("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){function i(t){var n,i=!1,a=!1,c=!1!==t.jsonp;if(e.location){var l="https:"===location.protocol,p=location.port;p||(p=l?443:80),i=t.hostname!==location.hostname||p!==t.port,a=t.secure!==l}if(t.xdomain=i,t.xscheme=a,n=new o(t),"open"in n&&!t.forceJSONP)return new r(t);if(!c)throw new Error("JSONP disabled");return new s(t)}var o=n(17),r=n(19),s=n(33),a=n(34);t.polling=i,t.websocket=a}).call(t,function(){return this}())},function(e,t,n){(function(t){var i=n(18);e.exports=function(e){var n=e.xdomain,o=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||i))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!o&&r)return new XDomainRequest}catch(s){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},function(e,t,n){(function(t){function i(){}function o(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var n="https:"===location.protocol,i=location.port;i||(i=n?443:80),this.xd=e.hostname!==t.location.hostname||i!==e.port,this.xs=e.secure!==n}}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var a=n(17),c=n(20),l=n(8),p=n(31),u=n(3)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=r,p(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new r(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),o=this;i.on("success",t),i.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=i},o.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(e),i=this;try{u("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{n.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var e;try{e=n.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===e&&(n.responseType="arraybuffer")}4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},u("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){i.onError(s)},0)}t.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(n){}t.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e="application/octet-stream"===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",s):t.addEventListener&&t.addEventListener("beforeunload",s,!1))}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=e&&e.forceBase64;p&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=n(21),r=n(30),s=n(22),a=n(31),c=n(32),l=n(3)("engine.io-client:polling");e.exports=i;var p=function(){var e=n(17),t=new e({xdomain:!1});return null!=t.responseType}();a(i,o),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,i){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var i=this.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=n(22),r=n(8);e.exports=i,r(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){function i(e,n){var i="b"+t.packets[e.type]+e.data.data;return n(i)}function o(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=e.data,r=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=g[e.type];for(var a=0;a<r.length;a++)s[a+1]=r[a];return i(s.buffer)}function r(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,i)},o.readAsArrayBuffer(e.data)}function s(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(m)return r(e,n,i);var o=new Uint8Array(1);o[0]=g[e.type];var s=new w([o.buffer,e.data]);return i(s)}function a(e){try{e=f.decode(e,{strict:!1})}catch(t){return!1}return e}function c(e,t,n){for(var i=new Array(e.length),o=d(e.length,n),r=function(e,n,o){t(n,function(t,n){i[e]=n,o(t,i)})},s=0;s<e.length;s++)r(s,e[s],o)}var l,p=n(23),u=n(9),h=n(24),d=n(25),f=n(26);e&&e.ArrayBuffer&&(l=n(28));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),b="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=y||b;t.protocol=3;var g=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=p(g),k={type:"error",data:"parser error"},w=n(29);t.encodePacket=function(t,n,r,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof r&&(a=r,r=null);var c=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&c instanceof ArrayBuffer)return o(t,n,a);if(w&&c instanceof e.Blob)return s(t,n,a);if(c&&c.base64)return i(t,a);var l=g[t.type];return void 0!==t.data&&(l+=r?f.encode(String(t.data),{strict:!1}):String(t.data)),a(""+l)},t.encodeBase64Packet=function(n,i){var o="b"+t.packets[n.type];if(w&&n.data instanceof e.Blob){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];i(o+e)},r.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),l=new Array(c.length),p=0;p<c.length;p++)l[p]=c[p];s=String.fromCharCode.apply(null,l)}return o+=e.btoa(s),i(o)},t.decodePacket=function(e,n,i){if(void 0===e)return k;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&(e=a(e),e===!1))return k;var o=e.charAt(0);return Number(o)==o&&v[o]?e.length>1?{type:v[o],data:e.substring(1)}:{type:v[o]}:k}var r=new Uint8Array(e),o=r[0],s=h(e,1);return w&&"blob"===n&&(s=new w([s])),{type:v[o],data:s}},t.decodeBase64Packet=function(e,t){var n=v[e.charAt(0)];if(!l)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=l.decode(e.substr(1));return"blob"===t&&w&&(i=new w([i])),{type:n,data:i}},t.encodePayload=function(e,n,i){function o(e){return e.length+":"+e}function r(e,i){t.encodePacket(e,!!s&&n,!1,function(e){i(null,o(e))})}"function"==typeof n&&(i=n,n=null);var s=u(e);return n&&s?w&&!m?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i):e.length?void c(e,r,function(e,t){return i(t.join(""))}):i("0:")},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);"function"==typeof n&&(i=n,n=null);var o;if(""===e)return i(k,0,1);for(var r,s,a="",c=0,l=e.length;c<l;c++){var p=e.charAt(c);if(":"===p){if(""===a||a!=(r=Number(a)))return i(k,0,1);if(s=e.substr(c+1,r),a!=s.length)return i(k,0,1);if(s.length){if(o=t.decodePacket(s,n,!1),k.type===o.type&&k.data===o.data)return i(k,0,1);var u=i(o,c+r,l);if(!1===u)return}c+=r,a=""}else a+=p}return""!==a?i(k,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function i(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}return e.length?void c(e,i,function(e,t){var i=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(i),r=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}t?o[r++]=0:o[r++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[r++]=parseInt(a[s]);o[r++]=255;for(var i=new Uint8Array(n),s=0;s<i.length;s++)o[r++]=i[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){function i(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);e=i.buffer,t[0]=0}for(var r=e instanceof ArrayBuffer?e.byteLength:e.size,s=r.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([t.buffer,a.buffer,e]);n(null,c)}})}c(e,i,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var o=e,r=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return i(k,0,1);c+=s[l]}o=h(o,2+c.length),c=parseInt(c);var p=h(o,0,c);if(a)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(u){var d=new Uint8Array(p);p="";for(var l=0;l<d.length;l++)p+=String.fromCharCode(d[l])}r.push(p),o=h(o,c)}var f=r.length;r.forEach(function(e,o){i(t.decodePacket(e,n,!0),o,f)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),r=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)r[a]=o[s];return r.buffer}},function(e,t){function n(e,t,n){function o(e,i){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(r=!0,t(e),t=n):0!==o.count||r||t(null,i)}var r=!1;return n=n||i,o.count=e,0===e?t():o}function i(){}e.exports=n},function(e,t,n){var i;(function(e,o){!function(r){function s(e){for(var t,n,i=[],o=0,r=e.length;o<r;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<r?(n=e.charCodeAt(o++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--)):i.push(t);return i}function a(e){for(var t,n=e.length,i=-1,o="";++i<n;)t=e[i],t>65535&&(t-=65536,o+=k(t>>>10&1023|55296),t=56320|1023&t),o+=k(t);return o}function c(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(e,t){return k(e>>t&63|128)}function p(e,t){if(0==(4294967168&e))return k(e);var n="";return 0==(4294965248&e)?n=k(e>>6&31|192):0==(4294901760&e)?(c(e,t)||(e=65533),n=k(e>>12&15|224),n+=l(e,6)):0==(4292870144&e)&&(n=k(e>>18&7|240),n+=l(e,12),n+=l(e,6)),n+=k(63&e|128)}function u(e,t){t=t||{};for(var n,i=!1!==t.strict,o=s(e),r=o.length,a=-1,c="";++a<r;)n=o[a],c+=p(n,i);return c}function h(){if(v>=g)throw Error("Invalid byte index");var e=255&m[v];if(v++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,n,i,o,r;if(v>g)throw Error("Invalid byte index");if(v==g)return!1;if(t=255&m[v],v++,0==(128&t))return t;if(192==(224&t)){if(n=h(),r=(31&t)<<6|n,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if(n=h(),i=h(),r=(15&t)<<12|n<<6|i,r>=2048)return c(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=h(),i=h(),o=h(),r=(7&t)<<18|n<<12|i<<6|o,r>=65536&&r<=1114111))return r;throw Error("Invalid UTF-8 detected")}function f(e,t){t=t||{};var n=!1!==t.strict;m=s(e),g=m.length,v=0;for(var i,o=[];(i=d(n))!==!1;)o.push(i);return a(o)}var y="object"==typeof t&&t,b=("object"==typeof e&&e&&e.exports==y&&e,"object"==typeof o&&o);b.global!==b&&b.window!==b||(r=b);var m,g,v,k=String.fromCharCode,w={version:"2.1.2",encode:u,decode:f};i=function(){return w}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(this)}).call(t,n(27)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),o=i.length,r="";for(n=0;n<o;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return o%3===2?r=r.substring(0,r.length-1)+"=":o%3===1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(e){var t,i,o,r,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var p=new ArrayBuffer(a),u=new Uint8Array(p);for(t=0;t<c;t+=4)i=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],u[l++]=i<<2|o>>4,u[l++]=(15&o)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return p}}()},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=o.buffer}e[t]=i}}}function i(e,t){t=t||{};var i=new r;n(e);for(var o=0;o<e.length;o++)i.append(e[o]);return t.type?i.getBlob(t.type):i.getBlob()}function o(e,t){return n(e),new Blob(e,t||{})}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),c=r&&r.prototype.append&&r.prototype.getBlob;e.exports=function(){return s?a?t.Blob:o:c?i:void 0}()}).call(t,function(){return this}())},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do t=s[e%a]+t,e=Math.floor(e/a);while(e>0);return t}function i(e){var t=0;for(p=0;p<e.length;p++)t=t*a+c[e.charAt(p)];return t}function o(){var e=n(+new Date);return e!==r?(l=0,r=e):e+"."+n(l++)}for(var r,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},l=0,p=0;p<a;p++)c[s[p]]=p;o.encode=n,o.decode=i,e.exports=o},function(e,t,n){(function(t){function i(){}function o(e){r.call(this,e),this.query=this.query||{},a||(t.___eio||(t.___eio=[]),a=t.___eio),this.index=a.length;var n=this;a.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=i)},!1)}var r=n(20),s=n(31);e.exports=o;var a,c=/\n/g,l=/\\n/g;s(o,r),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(t)}catch(e){r=document.createElement("iframe"),r.name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}var o=this;if(!this.form){var r,s=document.createElement("form"),a=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=p,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function i(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=u&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=o),r.call(this,e)}var o,r=n(21),s=n(22),a=n(30),c=n(31),l=n(32),p=n(3)("engine.io-client:websocket"),u=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{o=n(35)}catch(h){}var d=u;d||"undefined"!=typeof window||(d=o),e.exports=i,c(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new d(e,t):new d(e):new d(e,t,n)}catch(i){return this.emit("error",i)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},i.prototype.write=function(e){function n(){i.emit("flush"),setTimeout(function(){i.writable=!0,i.emit("drain")},0)}var i=this;this.writable=!1;for(var o=e.length,r=0,a=o;r<a;r++)!function(e){s.encodePacket(e,i.supportsBinary,function(r){if(!i.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),i.perMessageDeflate){var a="string"==typeof r?t.Buffer.byteLength(r):r.length;a<i.perMessageDeflate.threshold&&(s.compress=!1)}}try{i.usingBrowserWebSocket?i.ws.send(r):i.ws.send(r,s)}catch(c){p("websocket closed before onclose event")}--o||n()})}(e[r])},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var i=this.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e},i.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===i.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,n){"use strict";function i(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(7),s=n(8),a=n(38),c=n(39),l=n(40),p=n(3)("socket.io-client:socket"),u=n(30);e.exports=t=i;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=s.prototype.emit;s(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",l(this,"onopen")),c(e,"packet",l(this,"onpacket")),c(e,"close",l(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},i.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(h.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n={type:r.EVENT,data:t};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(p("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){if(p("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===o(this.query)?u.encode(this.query):this.query;p("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){p("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];p("emitting event %j",t),null!=e.id&&(p("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);p("sending ack %j",i),t.packet({type:r.ACK,id:e,data:i})}}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(p("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):p("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){p("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(p("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}e.exports=n},function(e,t){"use strict";function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=n},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])});var LobbyConsole=function(e){this.setDebugLevel(e)};LobbyConsole.prototype.EMERGENCY=0,LobbyConsole.prototype.ALERT=1,LobbyConsole.prototype.CRITICAL=2,LobbyConsole.prototype.ERROR=3,LobbyConsole.prototype.WARNING=4,LobbyConsole.prototype.NOTICE=5,LobbyConsole.prototype.INFO=6,LobbyConsole.prototype.SUCCESS=7,LobbyConsole.prototype.DEBUG=8,LobbyConsole.prototype.DISABLED=9,LobbyConsole.prototype.setDebugLevel=function(e){void 0!=e&&e<=this.DISABLED?this.debugLevel=e:this.debugLevel=this.DISABLED},LobbyConsole.prototype.emergency=function(e){this.debugLevel<=this.EMERGENCY&&this.log("%c"+e,"color:#FF0000;background-color:#FFE0E0")},LobbyConsole.prototype.alert=function(e){this.debugLevel<=this.ALERT&&this.log("%c"+e,"color:#C40000;background-color:#FFE0E0")},LobbyConsole.prototype.critical=function(e){this.debugLevel<=this.CRITICAL&&this.log("%c"+e,"color:#E0345F;background-color:#FFE0E0")},LobbyConsole.prototype.error=function(e){this.debugLevel<=this.ERROR&&this.log("%c"+e,"color:#FF0000")},LobbyConsole.prototype.warning=function(e){this.debugLevel<=this.WARNING&&this.log("%c"+e,"color:#C4AD00")},LobbyConsole.prototype.notice=function(e){this.debugLevel<=this.NOTICE&&this.log("%c"+e,"color:#0000FF")},LobbyConsole.prototype.info=function(e){
this.debugLevel<=this.INFO&&this.log("%c"+e,"color:#666666")},LobbyConsole.prototype.success=function(e){this.debugLevel<=this.SUCCESS&&this.log("%c"+e,"color:#4F8A10")},LobbyConsole.prototype.debug=function(e){this.debugLevel<=this.DEBUG&&this.log("%c"+e,"color:#000000")},LobbyConsole.prototype.log=function(){"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&console.log.apply(console,arguments)};var LobbyNotification=function(e){this.defaults={text:"Lobby Notification",layout:"centerRight",dismissQueue:!0,type:"information",closeWith:["click","button"],animation:{open:"animated bounceInRight",close:"animated bounceOutRight"}},void 0!=e&&e instanceof Object&&jQuery.extend(this.defaults,e)};LobbyNotification.prototype.alert=function(e,t){this.show(e,jQuery.extend({},{type:"alert"},t))},LobbyNotification.prototype.notice=function(e,t){this.show(e,jQuery.extend({},{type:"notification"},t))},LobbyNotification.prototype.warning=function(e,t){this.show(e,jQuery.extend({},{type:"warning"},t))},LobbyNotification.prototype.error=function(e,t){this.show(e,jQuery.extend({},{type:"error"},t))},LobbyNotification.prototype.info=function(e,t){this.show(e,jQuery.extend({},{type:"information"},t))},LobbyNotification.prototype.success=function(e,t){this.show(e,jQuery.extend({},{type:"success"},t))},LobbyNotification.prototype.lobbyToggle=function(){var e=window.location.pathname.toLowerCase();e.search(/lobby/)!=-1&&(""==$.trim($("#lobby-manutencao").html())?$("#lobbyDisabledCotnent").load("/lobby/manutencao",function(){$("#lobby-manutencao").html($("#lobbyDisabledCotnent").html())}):$("#lobby-manutencao").html(""))},LobbyNotification.prototype.show=function(e,t){t.text=e;var n=jQuery.extend({},this.defaults,t);new Noty(n).show()};var CompletePlayerAPI=function(){};CompletePlayerAPI.prototype.urls={accept:"/lobby/complete-player"},CompletePlayerAPI.prototype.getjQueryObject=function(){return this.jQueryObject||(this.jQueryObject=jQuery(this)),this.jQueryObject},CompletePlayerAPI.prototype.getUrl=function(e){return this.urls[e]},CompletePlayerAPI.prototype.accept=function(e,t,n){jQuery.ajax({url:this.getUrl("accept"),method:"POST",data:{gameid:e,playerid:t}}).done(function(e){e.success?n(!1,e):(console.log(e),n(!0,e))})},CompletePlayerRender.prototype.setTemplate=function(e){if("undefined"!=e){var t=document.querySelector(e).innerHTML;Mustache.parse(t),this.template=t}},CompletePlayerRender.prototype.getTemplate=function(){return this.template},CompletePlayerRender.prototype.confirmOpenGame=function(){var e=this,t=new CompletePlayerAPI,n=this.tempData;t.accept(n[0],n[1],function(t,i){t?(warning("Um outro jogador já completou a partida, obrigado!"),e.deleteRequest(n[0],n[1])):(e.playSound("accepted"),window.bypassADSCall=!0,openGame(),e.hideNotifications()),e.modal.hide()})},CompletePlayerRender.prototype.addRequest=function(e){e.hide?this.deleteRequest(e.gameid,e.playerid):this.requestExist(e.gameid,e.playerid)||(0==this.requests.length&&this.playSound("received"),e.map_img=e.map.replace("de_",""),e.ranked=this.rankedGroup[e.ranked],"Lobby"==e.ranked.name&&(e.lobby=!0),e.score1>e.score2?(e.score1_status="winning",e.score2_status="losing"):e.score1<e.score2?(e.score2_status="winning",e.score1_status="losing"):e.score1==e.score2&&(e.score2_status="tied",e.score1_status="tied"),this.requests.push(e),this.renderWidget())},CompletePlayerRender.prototype.requestExist=function(e,t){var n=!1;return this.requests.forEach(function(i,o){i.gameid==e&&i.playerid==t&&(n=!0)}),n},CompletePlayerRender.prototype.deleteRequest=function(e,t){this.requests=this.requests.filter(function(n,i){return n.gameid!=e||n.playerid!=t}),this.renderWidget()},CompletePlayerRender.prototype.deleteAllRequests=function(e,t){this.requests=[],this.renderWidget()},CompletePlayerRender.prototype.renderModal=function(e,t){this.setTemplate(this.templateModal);var n=Mustache.render(this.getTemplate(),{gameid:e,playerid:t});return n},CompletePlayerRender.prototype.renderWidget=function(){var e=this.requests.length;this.setTemplate(this.templateSrc);var t=Mustache.render(this.getTemplate(),{requests:this.requests,requestsTotal:e});document.querySelector(this.templateTarget).innerHTML=t,e>0?this.showNotifications():(this.hideRequests(),this.hideNotifications(),this.toggleDisclaimer(this.stateDisclaimerCookie()))},CompletePlayerRender.prototype.showNotifications=function(){var e=this,t=$(this.componentRoot),n=$([this.componentRoot,this.templateTarget].join(" "));$(this.templateDescription);n.find(".requests-list ul").scrollbar(),this.isNotificationOpen()||(t.addClass("complete-player-show"),this.toggleDisclaimer(this.stateDisclaimerCookie())),n.find(".notification .close").click(function(t){t.stopPropagation(),e.hideRequests()}),n.not("span.close").click(function(t){t.stopPropagation(),e.toggleDisclaimer(e.stateDisclaimerCookie()),e.showRequests()}),n.find(".deny-all").click(function(t){t.stopPropagation(),e.deleteAllRequests()})},CompletePlayerRender.prototype.isNotificationOpen=function(){var e=$(this.componentRoot);return e.hasClass("complete-player-show")},CompletePlayerRender.prototype.showRequests=function(){var e=$(this.componentRoot);e.addClass("complete-player-open")},CompletePlayerRender.prototype.hideRequests=function(){var e=$(this.componentRoot);e.removeClass("complete-player-open"),dynamicToolTipEvents.forceclean()},CompletePlayerRender.prototype.hideNotifications=function(){var e=$(this.componentRoot);e.removeClass("complete-player-show"),dynamicToolTipEvents.forceclean()},CompletePlayerRender.prototype.stateDisclaimerCookie=function(){var e=5;if(Cookies.get(this.disclaimerOmitCookieName)){var t=parseInt(Cookies.get(this.disclaimerOmitCookieName));return t<=e&&(Cookies.set(this.disclaimerOmitCookieName,t+1),!0)}return Cookies.set(this.disclaimerOmitCookieName,1),!0},CompletePlayerRender.prototype.toggleDisclaimer=function(e){var t=$([this.componentRoot,this.templateDisclaimer].join(" "));return e?void t.addClass("show"):void t.removeClass("show")},CompletePlayerRender.prototype.playSound=function(e){this.disableSounds||this.sounds[e]()},!function(e,t){"use strict";!function(t,n,i){function o(e){var i=n[e];return i||t[e][0].call(i=n[e]={exports:{}},o,i,i.exports),i.exports}var r=e.protobuf=o(i[0]);"function"==typeof define&&define.amd&&define(["long"],function(e){return e&&e.isLong&&(r.util.Long=e,r.configure()),r}),"object"==typeof module&&module&&module.exports&&(module.exports=r)}({1:[function(e,t){function n(e,t){for(var n=Array(arguments.length-1),i=0,o=2,r=!0;o<arguments.length;)n[i++]=arguments[o++];return new Promise(function(e,o){n[i]=function(t){if(r)if(r=!1,t)o(t);else{for(var n=Array(arguments.length-1),i=0;i<n.length;)n[i++]=arguments[i];e.apply(null,n)}};try{s.apply(t||null,n)}catch(s){r&&(r=!1,o(s))}})}t.exports=n},{}],2:[function(e,n,i){var o=i;o.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=Array(64),s=Array(123),a=0;a<64;)s[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;o.encode=function(e,t,n){for(var i,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[a++]=r[i|l>>6],s[a++]=r[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},o.decode=function(e,n,i){for(var o,r=i,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if((l=s[l])===t)throw Error("invalid encoding");switch(a){case 0:o=l,a=1;break;case 1:n[i++]=o<<2|(48&l)>>4,o=l,a=2;break;case 2:n[i++]=(15&o)<<4|(60&l)>>2,o=l,a=3;break;case 3:n[i++]=(3&o)<<6|l,a=0}}if(1===a)throw Error("invalid encoding");return i-r},o.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},{}],3:[function(e,n){function i(e,n){function o(e){if("string"!=typeof e){var t=r();if(i.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var n=Object.keys(e),a=Array(n.length+1),c=Array(n.length),l=0;l<n.length;)a[l]=n[l],c[l]=e[n[l++]];return a[l]=t,Function.apply(null,a).apply(null,c)}return Function(t)()}for(var p=Array(arguments.length-1),u=0;u<p.length;)p[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=p[u++];switch(t){case"d":case"f":return+n+"";case"i":return Math.floor(n)+"";case"j":return JSON.stringify(n);case"s":return n+""}return"%"}),u!==p.length)throw Error("parameter count mismatch");return s.push(e),o}function r(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}"string"==typeof e&&(n=e,e=t);var s=[];return o.toString=r,o}n.exports=i,i.verbose=!1},{}],4:[function(e,n){function i(){this.a={}}n.exports=i,i.prototype.on=function(e,t,n){return(this.a[e]||(this.a[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,n){if(e===t)this.a={};else if(n===t)this.a[e]=[];else for(var i=this.a[e],o=0;o<i.length;)i[o].fn===n?i.splice(o,1):++o;return this},i.prototype.emit=function(e){var t=this.a[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},{}],5:[function(e,n){function i(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&s&&s.readFile?s.readFile(e,function(o,r){return o&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,n):o?n(o):n(null,t.binary?r:r.toString("utf8"))}):i.xhr(e,t,n):o(i,this,e,t)}n.exports=i;var o=e(1),r=e(7),s=r("fs");i.xhr=function(e,n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return t;if(0!==o.status&&200!==o.status)return i(Error("status "+o.status));if(n.binary){var e=o.response;if(!e){e=[];for(var r=0;r<o.responseText.length;++r)e.push(255&o.responseText.charCodeAt(r))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return i(null,o.responseText)},n.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},{1:1,7:7}],6:[function(e,t){function n(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){r[0]=e,t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3]}function n(e,t,n){r[0]=e,t[n]=s[3],t[n+1]=s[2],t[n+2]=s[1],t[n+3]=s[0]}function i(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],r[0]}function o(e,t){return s[3]=e[t],s[2]=e[t+1],s[1]=e[t+2],s[0]=e[t+3],r[0]}var r=new Float32Array([-0]),s=new Uint8Array(r.buffer),a=128===s[3];e.writeFloatLE=a?t:n,e.writeFloatBE=a?n:t,e.readFloatLE=a?i:o,e.readFloatBE=a?o:i}():function(){function t(e,t,n,i){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>3.4028234663852886e38)e((o<<31|2139095040)>>>0,n,i);else if(t<1.1754943508222875e-38)e((o<<31|Math.round(t/1.401298464324817e-45))>>>0,n,i);else{var r=Math.floor(Math.log(t)/Math.LN2),s=8388607&Math.round(t*Math.pow(2,-r)*8388608);e((o<<31|r+127<<23|s)>>>0,n,i)}}function n(e,t,n){var i=e(t,n),o=2*(i>>31)+1,r=i>>>23&255,s=8388607&i;return 255===r?s?NaN:o*(1/0):0===r?1.401298464324817e-45*o*s:o*Math.pow(2,r-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,r),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){r[0]=e,t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3],t[n+4]=s[4],t[n+5]=s[5],t[n+6]=s[6],t[n+7]=s[7]}function n(e,t,n){r[0]=e,t[n]=s[7],t[n+1]=s[6],t[n+2]=s[5],t[n+3]=s[4],t[n+4]=s[3],t[n+5]=s[2],t[n+6]=s[1],t[n+7]=s[0]}function i(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],s[4]=e[t+4],s[5]=e[t+5],s[6]=e[t+6],s[7]=e[t+7],r[0]}function o(e,t){return s[7]=e[t],s[6]=e[t+1],s[5]=e[t+2],s[4]=e[t+3],s[3]=e[t+4],s[2]=e[t+5],s[1]=e[t+6],s[0]=e[t+7],r[0]}var r=new Float64Array([-0]),s=new Uint8Array(r.buffer),a=128===s[7];e.writeDoubleLE=a?t:n,e.writeDoubleBE=a?n:t,e.readDoubleLE=a?i:o,e.readDoubleBE=a?o:i}():function(){function t(e,t,n,i,o,r){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,o,r+t),e(1/i>0?0:2147483648,o,r+n);else if(isNaN(i))e(0,o,r+t),e(2146959360,o,r+n);else if(i>1.7976931348623157e308)e(0,o,r+t),e((s<<31|2146435072)>>>0,o,r+n);else{var a;if(i<2.2250738585072014e-308)a=i/5e-324,e(a>>>0,o,r+t),e((s<<31|a/4294967296)>>>0,o,r+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),a=i*Math.pow(2,-c),e(4503599627370496*a>>>0,o,r+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,r+n)}}}function n(e,t,n,i,o){var r=e(i,o+t),s=e(i,o+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+r;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,r,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],7:[function(e,t,r){function n(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}t.exports=n},{}],8:[function(e,t,n){var i=n,o=i.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},r=i.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),n=o(e),i="";n&&(i=t.shift()+"/");for(var r=0;r<t.length;)".."===t[r]?r>0&&".."!==t[r-1]?t.splice(--r,2):n?t.splice(r,1):++r:"."===t[r]?t.splice(r,1):++r;return i+t.join("/")};i.resolve=function(e,t,n){return n||(t=r(t)),o(t)?t:(n||(e=r(e)),(e=e.replace(/(?:\/|^)[^\/]+$/,"")).length?r(e+"/"+t):t)}},{}],9:[function(e,t){function n(e,t,n){var i=n||8192,o=i>>>1,r=null,s=i;return function(n){if(n<1||n>o)return e(n);s+n>i&&(r=e(i),s=0);var a=t.call(r,s,s+=n);return 7&s&&(s=1+(7|s)),a}}t.exports=n},{}],10:[function(e,t,n){var i=n;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,o=null,r=[],s=0;t<n;)i=e[t++],i<128?r[s++]=i:i>191&&i<224?r[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,r[s++]=55296+(i>>10),r[s++]=56320+(1023&i)):r[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,r)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,r.slice(0,s))),o.join("")):String.fromCharCode.apply(String,r.slice(0,s))},i.write=function(e,t,n){for(var i,o,r=n,s=0;s<e.length;++s)i=e.charCodeAt(s),i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(o=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&o),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-r}},{}],11:[function(e,t){function n(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}t.exports=n;var i=/\/|\./;n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var o;n("duration",{Duration:o={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:o}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n.get=function(e){return n[e]||null}},{}],12:[function(e,t,n){function i(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",i);for(var o=t.resolvedType.values,r=Object.keys(o),a=0;a<r.length;++a)t.repeated&&o[r[a]]===t.typeDefault&&e("default:"),e("case%j:",r[a])("case %i:",o[r[a]])("m%s=%j",i,o[r[a]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,c)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function o(e,t,n,i){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,n,i,i):e("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,o?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}var r=n,s=e(15),a=e(37);r.fromObject=function(e){var t=e.fieldsArray,n=a.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<t.length;++o){var r=t[o].resolve(),c=a.safeProp(r.name);r.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",r.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),i(n,r,o,c+"[ks[i]]")("}")("}")):r.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",r.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),i(n,r,o,c+"[i]")("}")("}")):(r.resolvedType instanceof s||n("if(d%s!=null){",c),i(n,r,o,c),r.resolvedType instanceof s||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(a.compareFieldsById);if(!t.length)return a.codegen()("return {}");for(var n=a.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],r=[],s=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?i:t[c].map?r:s).push(t[c]);var l,p,u=!1;for(c=0;c<t.length;++c){var l=t[c],h=e.b.indexOf(l),p=a.safeProp(l.name);l.map?(u||(u=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){"),o(n,l,h,p+"[ks2[j]]")("}")):l.repeated?(n("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p),o(n,l,h,p+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",p,l.name),o(n,l,h,p),l.partOf&&n("if(o.oneofs)")("d%s=%j",a.safeProp(l.partOf.name),l.name)),n("}")}return n("return d")}},{15:15,37:37}],13:[function(e,n){function i(e){return"missing required '"+e.name+"'"}function o(e){var n=a.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&n("if((t&7)===4)")("break"),n("switch(t>>>3){");for(var o=0;o<e.fieldsArray.length;++o){var c=e.b[o].resolve(),l=c.resolvedType instanceof r?"int32":c.type,p="m"+a.safeProp(c.name);n("case %i:",c.id),c.map?(n("r.skip().pos++")("if(%s===util.emptyObject)",p)("%s={}",p)("k=r.%s()",c.keyType)("r.pos++"),s["long"][c.keyType]!==t?s.basic[l]===t?n('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',p,o):n('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',p,l):s.basic[l]===t?n("%s[k]=types[%i].decode(r,r.uint32())",p,o):n("%s[k]=r.%s()",p,l)):c.repeated?(n("if(!(%s&&%s.length))",p,p)("%s=[]",p),s.packed[l]!==t&&n("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",p,l)("}else"),s.basic[l]===t?n(c.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",p,o):n("%s.push(r.%s())",p,l)):s.basic[l]===t?n(c.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",p,o):n("%s=r.%s()",p,l),n("break")}for(n("default:")("r.skipType(t&7)")("break")("}")("}"),o=0;o<e.b.length;++o){var u=e.b[o];u.required&&n("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",i(u))}return n("return m")}n.exports=o;var r=e(15),s=e(36),a=e(37)},{15:15,36:36,37:37}],14:[function(e,n){function i(e,t,n,i){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(t.id<<3|2)>>>0)}function o(e){for(var n,o,c=a.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(a.compareFieldsById),n=0;n<l.length;++n){var p=l[n].resolve(),u=e.b.indexOf(p),h=p.resolvedType instanceof r?"int32":p.type,d=s.basic[h];o="m"+a.safeProp(p.name),p.map?(c("if(%s!=null&&m.hasOwnProperty(%j)){",o,p.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(p.id<<3|2)>>>0,8|s.mapKey[p.keyType],p.keyType),d===t?c("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,o):c(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,o),c("}")("}")):p.repeated?(c("if(%s!=null&&%s.length){",o,o),p.packed&&s.packed[h]!==t?c("w.uint32(%i).fork()",(p.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",h,o)("w.ldelim()"):(c("for(var i=0;i<%s.length;++i)",o),d===t?i(c,p,u,o+"[i]"):c("w.uint32(%i).%s(%s[i])",(p.id<<3|d)>>>0,h,o)),c("}")):(p.optional&&c("if(%s!=null&&m.hasOwnProperty(%j))",o,p.name),d===t?i(c,p,u,o):c("w.uint32(%i).%s(%s)",(p.id<<3|d)>>>0,h,o))}return c("return w")}n.exports=o;var r=e(15),s=e(36),a=e(37)},{15:15,36:36,37:37}],15:[function(e,n){function i(e,n,i){if(o.call(this,e,i),n&&"object"!=typeof n)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},this.reserved=t,n)for(var r=Object.keys(n),s=0;s<r.length;++s)"number"==typeof n[r[s]]&&(this.valuesById[this.values[r[s]]=n[r[s]]]=r[s])}n.exports=i;var o=e(24);((i.prototype=Object.create(o.prototype)).constructor=i).className="Enum";var r=e(23),s=e(37);i.fromJSON=function(e,t){var n=new i(e,t.values,t.options);return n.reserved=t.reserved,n},i.prototype.toJSON=function(){return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:t])},i.prototype.add=function(e,n,i){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(n))throw TypeError("id must be an integer");if(this.values[e]!==t)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[n]!==t){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+n+" in "+this);this.values[e]=n}else this.valuesById[this.values[e]=n]=e;return this.comments[e]=i||null,this},i.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},i.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)}},{23:23,24:24,37:37}],16:[function(e,n){function i(e,n,i,r,s,p){if(c.isObject(r)?(p=r,r=s=t):c.isObject(s)&&(p=s,s=t),o.call(this,e,p),!c.isInteger(n)||n<0)throw TypeError("id must be a non-negative integer");if(!c.isString(i))throw TypeError("type must be a string");if(r!==t&&!l.test(r=(""+r).toLowerCase()))throw TypeError("rule must be a string rule");if(s!==t&&!c.isString(s))throw TypeError("extend must be a string");this.rule=r&&"optional"!==r?r:t,this.type=i,this.id=n,this.extend=s||t,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this["long"]=!!c.Long&&a["long"][i]!==t,this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.c=null}n.exports=i;var o=e(24);((i.prototype=Object.create(o.prototype)).constructor=i).className="Field";var r,s=e(15),a=e(36),c=e(37),l=/^required|optional|repeated$/;i.fromJSON=function(e,t){return new i(e,t.id,t.type,t.rule,t.extend,t.options)},Object.defineProperty(i.prototype,"packed",{get:function(){return null===this.c&&(this.c=!1!==this.getOption("packed")),this.c}}),i.prototype.setOption=function(e,t,n){return"packed"===e&&(this.c=null),o.prototype.setOption.call(this,e,t,n)},i.prototype.toJSON=function(){return c.toObject(["rule","optional"!==this.rule&&this.rule||t,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},i.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=a.defaults[this.type])===t&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options["default"]&&(this.typeDefault=this.options["default"],this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===t||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=t)),this["long"])this.typeDefault=c.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;c.base64.test(this.typeDefault)?c.base64.decode(this.typeDefault,e=c.newBuffer(c.base64.length(this.typeDefault)),0):c.utf8.write(this.typeDefault,e=c.newBuffer(c.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=c.emptyObject:this.repeated?this.defaultValue=c.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this)},i.d=function(e,t,n,o){return"function"==typeof t?t=c.decorateType(t).name:t&&"object"==typeof t&&(t=c.decorateEnum(t).name),function(r,s){c.decorateType(r.constructor).add(new i(s,e,t,n,{"default":o}))}},i.e=function(e){r=e}},{15:15,24:24,36:36,37:37}],17:[function(e,t){function n(e,t,n){return"function"==typeof t?(n=t,t=new o.Root):t||(t=new o.Root),t.load(e,n)}function i(e,t){return t||(t=new o.Root),t.loadSync(e)}var o=t.exports=e(18);o.build="light",o.load=n,o.loadSync=i,o.encoder=e(14),o.decoder=e(13),o.verifier=e(40),o.converter=e(12),o.ReflectionObject=e(24),o.Namespace=e(23),o.Root=e(29),o.Enum=e(15),o.Type=e(35),o.Field=e(16),o.OneOf=e(25),o.MapField=e(20),o.Service=e(33),o.Method=e(22),o.Message=e(21),o.wrappers=e(41),o.types=e(36),o.util=e(37),o.ReflectionObject.e(o.Root),o.Namespace.e(o.Type,o.Service),o.Root.e(o.Type),o.Field.e(o.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(e,t,n){function i(){o.Reader.e(o.BufferReader),o.util.e()}var o=n;o.build="minimal",o.Writer=e(42),o.BufferWriter=e(43),o.Reader=e(27),o.BufferReader=e(28),o.util=e(39),o.rpc=e(31),o.roots=e(30),o.configure=i,o.Writer.e(o.BufferWriter),i()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(e,t){var n=t.exports=e(17);n.build="full",n.tokenize=e(34),n.parse=e(26),n.common=e(11),n.Root.e(n.Type,n.parse,n.common)},{11:11,17:17,26:26,34:34}],20:[function(e,n){function i(e,t,n,i,r){if(o.call(this,e,t,i,r),!s.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}n.exports=i;var o=e(16);((i.prototype=Object.create(o.prototype)).constructor=i).className="MapField";var r=e(36),s=e(37);i.fromJSON=function(e,t){return new i(e,t.id,t.keyType,t.type,t.options)},i.prototype.toJSON=function(){return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},i.prototype.resolve=function(){if(this.resolved)return this;if(r.mapKey[this.keyType]===t)throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},i.d=function(e,t,n){return"function"==typeof n?n=s.decorateType(n).name:n&&"object"==typeof n&&(n=s.decorateEnum(n).name),function(o,r){s.decorateType(o.constructor).add(new i(r,e,t,n))}}},{16:16,36:36,37:37}],21:[function(e,t){function n(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}t.exports=n;var i=e(39);n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},{39:39}],22:[function(e,n){function i(e,n,i,s,a,c,l){if(r.isObject(a)?(l=a,a=c=t):r.isObject(c)&&(l=c,c=t),n!==t&&!r.isString(n))throw TypeError("type must be a string");if(!r.isString(i))throw TypeError("requestType must be a string");if(!r.isString(s))throw TypeError("responseType must be a string");o.call(this,e,l),this.type=n||"rpc",this.requestType=i,this.requestStream=!!a||t,this.responseType=s,this.responseStream=!!c||t,this.resolvedRequestType=null,this.resolvedResponseType=null}n.exports=i;var o=e(24);((i.prototype=Object.create(o.prototype)).constructor=i).className="Method";var r=e(37);i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options)},i.prototype.toJSON=function(){return r.toObject(["type","rpc"!==this.type&&this.type||t,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),
o.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(e,n){function i(e){if(!e||!e.length)return t;for(var n={},i=0;i<e.length;++i)n[e[i].name]=e[i].toJSON();return n}function o(e,n){s.call(this,e,n),this.nested=t,this.f=null}function r(e){return e.f=null,e}n.exports=o;var s=e(24);((o.prototype=Object.create(s.prototype)).constructor=o).className="Namespace";var a,c,l=e(15),p=e(16),u=e(37);o.fromJSON=function(e,t){return new o(e,t.options).addJSON(t.nested)},o.arrayToJSON=i,o.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>=t)return!0;return!1},o.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(o.prototype,"nestedArray",{get:function(){return this.f||(this.f=u.toArray(this.nested))}}),o.prototype.toJSON=function(){return u.toObject(["options",this.options,"nested",i(this.nestedArray)])},o.prototype.addJSON=function(e){var n=this;if(e)for(var i,r=Object.keys(e),s=0;s<r.length;++s)i=e[r[s]],n.add((i.fields!==t?a.fromJSON:i.values!==t?l.fromJSON:i.methods!==t?c.fromJSON:i.id!==t?p.fromJSON:o.fromJSON)(r[s],i));return this},o.prototype.get=function(e){return this.nested&&this.nested[e]||null},o.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof l)return this.nested[e].values;throw Error("no such enum")},o.prototype.add=function(e){if(!(e instanceof p&&e.extend!==t||e instanceof a||e instanceof l||e instanceof c||e instanceof o))throw TypeError("object must be a valid nested object");if(this.nested){var n=this.get(e.name);if(n){if(!(n instanceof o&&e instanceof o)||n instanceof a||n instanceof c)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=n.nestedArray,s=0;s<i.length;++s)e.add(i[s]);this.remove(n),this.nested||(this.nested={}),e.setOptions(n.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),r(this)},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=t),e.onRemove(this),r(this)},o.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var i=e.shift();if(n.nested&&n.nested[i]){if(!((n=n.nested[i])instanceof o))throw Error("path conflicts with non-namespace objects")}else n.add(n=new o(i))}return t&&n.addJSON(t),n},o.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof o?e[t++].resolveAll():e[t++].resolve();return this.resolve()},o.prototype.lookup=function(e,n,i){if("boolean"==typeof n?(i=n,n=t):n&&!Array.isArray(n)&&(n=[n]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),n);var r=this.get(e[0]);if(r){if(1===e.length){if(!n||n.indexOf(r.constructor)>-1)return r}else if(r instanceof o&&(r=r.lookup(e.slice(1),n,!0)))return r}else for(var s=0;s<this.nestedArray.length;++s)if(this.f[s]instanceof o&&(r=this.f[s].lookup(e,n,!0)))return r;return null===this.parent||i?null:this.parent.lookup(e,n)},o.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type");return t},o.prototype.lookupEnum=function(e){var t=this.lookup(e,[l]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},o.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,l]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},o.prototype.lookupService=function(e){var t=this.lookup(e,[c]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},o.e=function(e,t){a=e,c=t}},{15:15,16:16,24:24,37:37}],24:[function(e,n){function i(e,t){if(!r.isString(e))throw TypeError("name must be a string");if(t&&!r.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}n.exports=i,i.className="ReflectionObject";var o,r=e(37);Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof o&&t.g(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof o&&t.h(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved?this:(this.root instanceof o&&(this.resolved=!0),this)},i.prototype.getOption=function(e){return this.options?this.options[e]:t},i.prototype.setOption=function(e,n,i){return i&&this.options&&this.options[e]!==t||((this.options||(this.options={}))[e]=n),this},i.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i.e=function(e){o=e}},{37:37}],25:[function(e,n){function i(e,n,i){if(Array.isArray(n)||(i=n,n=t),r.call(this,e,i),n!==t&&!Array.isArray(n))throw TypeError("fieldNames must be an Array");this.oneof=n||[],this.fieldsArray=[]}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}n.exports=i;var r=e(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="OneOf";var s=e(16),a=e(37);i.fromJSON=function(e,t){return new i(e,t.oneof,t.options)},i.prototype.toJSON=function(){return a.toObject(["options",this.options,"oneof",this.oneof])},i.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},i.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this},i.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=this,n=0;n<this.oneof.length;++n){var i=e.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}o(this)},i.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},i.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){a.decorateType(t.constructor).add(new i(n,e)),Object.defineProperty(t,n,{get:a.oneOfGetter(e),set:a.oneOfSetter(e)})}}},{16:16,24:24,37:37}],26:[function(e,n){function i(e,n,A){function O(e,t,n){var o=i.filename;return n||(i.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(o?o+", ":"")+"line "+Z.line+")")}function T(){var e,t=[];do{if('"'!==(e=ee())&&"'"!==e)throw O(e);t.push(ee()),ie(e),e=ne()}while('"'===e||"'"===e);return t.join("")}function E(e){var t=ee();switch(t){case"'":case'"':return te(t),T();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return R(t,!0)}catch(n){if(e&&C.test(t))return t;throw O(t,"value")}}function x(e,t){var n,i;do!t||'"'!==(n=ne())&&"'"!==n?e.push([i=P(ee()),ie("to",!0)?P(ee()):i]):e.push(T());while(ie(",",!0));ie(";")}function R(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(y.test(e))return n*parseInt(e,10);if(m.test(e))return n*parseInt(e,16);if(v.test(e))return n*parseInt(e,8);if(w.test(e))return n*parseFloat(e);throw O(e,"number",t)}function P(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw O(e,"id");if(b.test(e))return parseInt(e,10);if(g.test(e))return parseInt(e,16);if(k.test(e))return parseInt(e,8);throw O(e,"id")}function I(e,t){switch(t){case"option":return $(e,t),ie(";"),!0;case"message":return j(e,t),!0;case"enum":return W(e,t),!0;case"service":return J(e,t),!0;case"extend":return H(e,t),!0}return!1}function N(e,t,n){var o=Z.line;if(e&&(e.comment=oe(),e.filename=i.filename),ie("{",!0)){for(var r;"}"!==(r=ee());)t(r);ie(";",!0)}else n&&n(),ie(";"),e&&"string"!=typeof e.comment&&(e.comment=oe(o))}function j(e,t){if(!S.test(t=ee()))throw O(t,"type name");var n=new s(t);N(n,function(e){if(!I(n,e))switch(e){case"map":M(n);break;case"required":case"optional":case"repeated":D(n,e);break;case"oneof":B(n,e);break;case"extensions":x(n.extensions||(n.extensions=[]));break;case"reserved":x(n.reserved||(n.reserved=[]),!0);break;default:if(!se||!C.test(e))throw O(e);te(e),D(n,"optional")}}),e.add(n)}function D(e,n,i){var o=ee();if("group"===o)return void _(e,n);if(!C.test(o))throw O(o,"type");var r=ee();if(!S.test(r))throw O(r,"name");r=ce(r),ie("=");var s=new a(r,P(ee()),o,n,i);N(s,function(e){if("option"!==e)throw O(e);$(s,e),ie(";")},function(){F(s)}),e.add(s),se||!s.repeated||d.packed[o]===t&&d.basic[o]!==t||s.setOption("packed",!1,!0)}function _(e,t){var n=ee();if(!S.test(n))throw O(n,"name");var o=f.lcFirst(n);n===o&&(n=f.ucFirst(n)),ie("=");var r=P(ee()),c=new s(n);c.group=!0;var l=new a(o,r,n,t);l.filename=i.filename,N(c,function(e){switch(e){case"option":$(c,e),ie(";");break;case"required":case"optional":case"repeated":D(c,e);break;default:throw O(e)}}),e.add(c).add(l)}function M(e){ie("<");var n=ee();if(d.mapKey[n]===t)throw O(n,"type");ie(",");var i=ee();if(!C.test(i))throw O(i,"type");ie(">");var o=ee();if(!S.test(o))throw O(o,"name");ie("=");var r=new c(ce(o),P(ee()),n,i);N(r,function(e){if("option"!==e)throw O(e);$(r,e),ie(";")},function(){F(r)}),e.add(r)}function B(e,t){if(!S.test(t=ee()))throw O(t,"name");var n=new l(ce(t));N(n,function(e){"option"===e?($(n,e),ie(";")):(te(e),D(n,"optional"))}),e.add(n)}function W(e,t){if(!S.test(t=ee()))throw O(t,"name");var n=new p(t);N(n,function(e){switch(e){case"option":$(n,e),ie(";");break;case"reserved":x(n.reserved||(n.reserved=[]),!0);break;default:q(n,e)}}),e.add(n)}function q(e,t){if(!S.test(t))throw O(t,"name");ie("=");var n=P(ee(),!0),i={};N(i,function(e){if("option"!==e)throw O(e);$(i,e),ie(";")},function(){F(i)}),e.add(t,n,i.comment)}function $(e,t){var n=ie("(",!0);if(!C.test(t=ee()))throw O(t,"name");var i=t;n&&(ie(")"),i="("+i+")",t=ne(),L.test(t)&&(i+=t,ee())),ie("="),G(e,i)}function G(e,t){if(ie("{",!0)){do{if(!S.test(Q=ee()))throw O(Q,"name");"{"===ne()?G(e,t+"."+Q):(ie(":"),"{"===ne()?G(e,t+"."+Q):U(e,t+"."+Q,E(!0)))}while(!ie("}",!0))}else U(e,t,E(!0))}function U(e,t,n){e.setOption&&e.setOption(t,n)}function F(e){if(ie("[",!0)){do $(e,"option");while(ie(",",!0));ie("]")}return e}function J(e,t){if(!S.test(t=ee()))throw O(t,"service name");var n=new u(t);N(n,function(e){if(!I(n,e)){if("rpc"!==e)throw O(e);V(n,e)}}),e.add(n)}function V(e,t){var n=t;if(!S.test(t=ee()))throw O(t,"name");var i,o,r,s,a=t;if(ie("("),ie("stream",!0)&&(o=!0),!C.test(t=ee()))throw O(t);if(i=t,ie(")"),ie("returns"),ie("("),ie("stream",!0)&&(s=!0),!C.test(t=ee()))throw O(t);r=t,ie(")");var c=new h(a,n,i,r,o,s);N(c,function(e){if("option"!==e)throw O(e);$(c,e),ie(";")}),e.add(c)}function H(e,t){if(!C.test(t=ee()))throw O(t,"reference");var n=t;N(null,function(t){switch(t){case"required":case"repeated":case"optional":D(e,t,n);break;default:if(!se||!C.test(t))throw O(t);te(t),D(e,"optional",n)}})}n instanceof r||(A=n,n=new r),A||(A=i.defaults);for(var z,Y,X,K,Q,Z=o(e),ee=Z.next,te=Z.push,ne=Z.peek,ie=Z.skip,oe=Z.cmnt,re=!0,se=!1,ae=n,ce=A.keepCase?function(e){return e}:f.camelCase;null!==(Q=ee());)switch(Q){case"package":if(!re)throw O(Q);!function(){if(z!==t)throw O("package");if(z=ee(),!C.test(z))throw O(z,"name");ae=ae.define(z),ie(";")}();break;case"import":if(!re)throw O(Q);!function(){var e,t=ne();switch(t){case"weak":e=X||(X=[]),ee();break;case"public":ee();default:e=Y||(Y=[])}t=T(),ie(";"),e.push(t)}();break;case"syntax":if(!re)throw O(Q);!function(){if(ie("="),K=T(),!(se="proto3"===K)&&"proto2"!==K)throw O(K,"syntax");ie(";")}();break;case"option":if(!re)throw O(Q);$(ae,Q),ie(";");break;default:if(I(ae,Q)){re=!1;continue}throw O(Q)}return i.filename=null,{"package":z,imports:Y,weakImports:X,syntax:K,root:n}}n.exports=i,i.filename=null,i.defaults={keepCase:!1};var o=e(34),r=e(29),s=e(35),a=e(16),c=e(20),l=e(25),p=e(15),u=e(33),h=e(22),d=e(36),f=e(37),y=/^[1-9][0-9]*$/,b=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,g=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,k=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,C=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,L=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(e,t){function n(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function i(e){this.buf=e,this.pos=0,this.len=e.length}function o(){var e=new l(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw n(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw n(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function r(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw n(this,8);return new l(r(this.buf,this.pos+=4),r(this.buf,this.pos+=4))}t.exports=i;var a,c=e(39),l=c.LongBits,p=c.utf8,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new i(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new i(e);throw Error("illegal buffer")};i.create=c.Buffer?function(e){return(i.create=function(e){return c.Buffer.isBuffer(e)?new a(e):u(e)})(e)}:u,i.prototype.i=c.Array.prototype.subarray||c.Array.prototype.slice,i.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,n(this,10);return e}}(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw n(this,4);return r(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw n(this,4);return 0|r(this.buf,this.pos+=4)},i.prototype["float"]=function(){if(this.pos+4>this.len)throw n(this,4);var e=c["float"].readFloatLE(this.buf,this.pos);return this.pos+=4,e},i.prototype["double"]=function(){if(this.pos+8>this.len)throw n(this,4);var e=c["float"].readDoubleLE(this.buf,this.pos);return this.pos+=8,e},i.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw n(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this.i.call(this.buf,t,i)},i.prototype.string=function(){var e=this.bytes();return p.read(e,0,e.length)},i.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw n(this,e);this.pos+=e}else do if(this.pos>=this.len)throw n(this);while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},i.e=function(e){a=e;var t=c.Long?"toLong":"toNumber";c.merge(i.prototype,{int64:function(){return o.call(this)[t](!1)},uint64:function(){return o.call(this)[t](!0)},sint64:function(){return o.call(this).zzDecode()[t](!1)},fixed64:function(){return s.call(this)[t](!0)},sfixed64:function(){return s.call(this)[t](!1)}})}},{39:39}],28:[function(e,t){function n(e){i.call(this,e)}t.exports=n;var i=e(27);(n.prototype=Object.create(i.prototype)).constructor=n;var o=e(39);o.Buffer&&(n.prototype.i=o.Buffer.prototype.slice),n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},{27:27,39:39}],29:[function(e,n){function i(e){s.call(this,"",e),this.deferred=[],this.files=[]}function o(){}function r(e,n){var i=n.parent.lookup(n.extend);if(i){var o=new p(n.fullName,n.id,n.type,n.rule,t,n.options);return o.declaringField=n,n.extensionField=o,i.add(o),!0}return!1}n.exports=i;var s=e(23);((i.prototype=Object.create(s.prototype)).constructor=i).className="Root";var a,c,l,p=e(16),u=e(15),h=e(25),d=e(37);i.fromJSON=function(e,t){return t||(t=new i),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},i.prototype.resolvePath=d.path.resolve,i.prototype.load=function y(e,n,i){function r(e,t){if(i){var n=i;if(i=null,u)throw e;n(e,t)}}function s(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){c.filename=e;var i,o=c(t,p,n),s=0;if(o.imports)for(;s<o.imports.length;++s)(i=p.resolvePath(e,o.imports[s]))&&a(i);if(o.weakImports)for(s=0;s<o.weakImports.length;++s)(i=p.resolvePath(e,o.weakImports[s]))&&a(i,!0)}else p.setOptions(t.options).addJSON(t.nested)}catch(e){r(e)}u||h||r(null,p)}function a(e,t){var n=e.lastIndexOf("google/protobuf/");if(n>-1){var o=e.substring(n);o in l&&(e=o)}if(!(p.files.indexOf(e)>-1)){if(p.files.push(e),e in l)return void(u?s(e,l[e]):(++h,setTimeout(function(){--h,s(e,l[e])})));if(u){var a;try{a=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||r(e))}s(e,a)}else++h,d.fetch(e,function(n,o){if(--h,i)return n?void(t?h||r(null,p):r(n)):void s(e,o)})}}"function"==typeof n&&(i=n,n=t);var p=this;if(!i)return d.asPromise(y,p,e,n);var u=i===o,h=0;d.isString(e)&&(e=[e]);for(var f,b=0;b<e.length;++b)(f=p.resolvePath("",e[b]))&&a(f);return u?p:(h||r(null,p),t)},i.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,o)},i.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return s.prototype.resolveAll.call(this)};var f=/^[A-Z]/;i.prototype.g=function(e){if(e instanceof p)e.extend===t||e.extensionField||r(this,e)||this.deferred.push(e);else if(e instanceof u)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof h)){if(e instanceof a)for(var n=0;n<this.deferred.length;)r(this,this.deferred[n])?this.deferred.splice(n,1):++n;for(var i=0;i<e.nestedArray.length;++i)this.g(e.f[i]);f.test(e.name)&&(e.parent[e.name]=e)}},i.prototype.h=function(e){if(e instanceof p){if(e.extend!==t)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var n=this.deferred.indexOf(e);n>-1&&this.deferred.splice(n,1)}}else if(e instanceof u)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof s){for(var i=0;i<e.nestedArray.length;++i)this.h(e.f[i]);f.test(e.name)&&delete e.parent[e.name]}},i.e=function(e,t,n){a=e,c=t,l=n}},{15:15,16:16,23:23,25:25,37:37}],30:[function(e,t){t.exports={}},{}],31:[function(e,t,n){n.Service=e(32)},{32:32}],32:[function(e,n){function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}n.exports=i;var o=e(39);(i.prototype=Object.create(o.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function r(e,n,i,s,a){if(!s)throw TypeError("request must be specified");var c=this;if(!a)return o.asPromise(r,c,e,n,i,s);if(!c.rpcImpl)return setTimeout(function(){a(Error("already ended"))},0),t;try{return c.rpcImpl(e,n[c.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(n,o){if(n)return c.emit("error",n,e),a(n);if(null===o)return c.end(!0),t;if(!(o instanceof i))try{o=i[c.responseDelimited?"decodeDelimited":"decode"](o)}catch(n){return c.emit("error",n,e),a(n)}return c.emit("data",o,e),a(null,o)})}catch(r){return c.emit("error",r,e),setTimeout(function(){a(r)},0),t}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(e,n){function i(e,t){r.call(this,e,t),this.methods={},this.j=null}function o(e){return e.j=null,e}n.exports=i;var r=e(23);((i.prototype=Object.create(r.prototype)).constructor=i).className="Service";var s=e(22),a=e(37),c=e(31);i.fromJSON=function(e,t){var n=new i(e,t.options);if(t.methods)for(var o=Object.keys(t.methods),r=0;r<o.length;++r)n.add(s.fromJSON(o[r],t.methods[o[r]]));return t.nested&&n.addJSON(t.nested),n},i.prototype.toJSON=function(){var e=r.prototype.toJSON.call(this);return a.toObject(["options",e&&e.options||t,"methods",r.arrayToJSON(this.methodsArray)||{},"nested",e&&e.nested||t])},Object.defineProperty(i.prototype,"methodsArray",{get:function(){return this.j||(this.j=a.toArray(this.methods))}}),i.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},i.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},i.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,o(this)):r.prototype.add.call(this,e)},i.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,o(this)}return r.prototype.remove.call(this,e)},i.prototype.create=function(e,t,n){for(var i,o=new c.Service(e,t,n),r=0;r<this.methodsArray.length;++r){var s=a.lcFirst((i=this.j[r]).resolve().name).replace(/[^$\w_]/g,"");o[s]=a.codegen(["r","c"],a.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return o}},{22:22,23:23,31:31,37:37}],34:[function(e,n){function i(e){return e.replace(u,function(e,t){switch(t){case"\\":case"":return t;default:return h[t]||""}})}function o(e){function n(e){return Error("illegal "+e+" (line "+k+")")}function o(){var t="'"===O?a:s;t.lastIndex=g-1;var o=t.exec(e);if(!o)throw n("string");return g=t.lastIndex,f(O),O=null,i(o[1])}function u(t){return e.charAt(t)}function h(t,n){w=e.charAt(t++),C=k,L=!1;var i,o=t-3;do if(--o<0||"\n"===(i=e.charAt(o))){L=!0;break}while(" "===i||"\t"===i);for(var r=e.substring(t,n).split(l),s=0;s<r.length;++s)r[s]=r[s].replace(c,"").trim();S=r.join("\n").trim()}function d(){if(A.length>0)return A.shift();if(O)return o();var t,i,s,a,c;do{if(g===v)return null;for(t=!1;p.test(s=u(g));)if("\n"===s&&++k,++g===v)return null;if("/"===u(g)){if(++g===v)throw n("comment");if("/"===u(g)){for(c="/"===u(a=g+1);"\n"!==u(++g);)if(g===v)return null;++g,c&&h(a,g-1),++k,t=!0}else{if("*"!==(s=u(g)))return"/";c="*"===u(a=g+1);do{if("\n"===s&&++k,++g===v)throw n("comment");i=s,s=u(g)}while("*"!==i||"/"!==s);++g,c&&h(a,g-2),t=!0}}}while(t);var l=g;if(r.lastIndex=0,!r.test(u(l++)))for(;l<v&&!r.test(u(l));)++l;var d=e.substring(g,g=l);return'"'!==d&&"'"!==d||(O=d),d}function f(e){A.push(e)}function y(){if(!A.length){var e=d();if(null===e)return null;f(e)}return A[0]}function b(e,t){var i=y();if(i===e)return d(),!0;if(!t)throw n("token '"+i+"', '"+e+"' expected");return!1}function m(e){var n=null;return e===t?C!==k-1||"*"!==w&&!L||(n=S):(C<e&&y(),C!==e||L||"/"!==w||(n=S)),n}e=""+e;var g=0,v=e.length,k=1,w=null,S=null,C=0,L=!1,A=[],O=null;return Object.defineProperty({next:d,peek:y,push:f,skip:b,cmnt:m},"line",{get:function(){return k}})}n.exports=o;var r=/[\s{}=;:[\],'"()<>]/g,s=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,a=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,c=/^ *[*\/]+ */,l=/\n/g,p=/\s/,u=/\\(.?)/g,h={0:"\0",r:"\r",n:"\n",t:"\t"};o.unescape=i},{}],35:[function(e,n){function i(e,n){r.call(this,e,n),this.fields={},this.oneofs=t,this.extensions=t,this.reserved=t,this.group=t,this.k=null,this.b=null,this.l=null,this.o=null}function o(e){return e.k=e.b=e.l=null,delete e.encode,delete e.decode,delete e.verify,e}n.exports=i;var r=e(23);((i.prototype=Object.create(r.prototype)).constructor=i).className="Type";var s=e(15),a=e(25),c=e(16),l=e(20),p=e(33),u=e(21),h=e(27),d=e(42),f=e(37),y=e(14),b=e(13),m=e(40),g=e(12),v=e(41);Object.defineProperties(i.prototype,{fieldsById:{get:function(){if(this.k)return this.k;this.k={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],i=n.id;if(this.k[i])throw Error("duplicate id "+i+" in "+this);this.k[i]=n}return this.k}},fieldsArray:{get:function(){return this.b||(this.b=f.toArray(this.fields))}},oneofsArray:{get:function(){return this.l||(this.l=f.toArray(this.oneofs))}},ctor:{get:function(){return this.o||(this.ctor=i.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,f.merge(e.prototype,t)),e.$type=e.prototype.$type=this,f.merge(e,u,!0),this.o=e;for(var n=0;n<this.fieldsArray.length;++n)this.b[n].resolve();var i={};for(n=0;n<this.oneofsArray.length;++n)i[this.l[n].resolve().name]={get:f.oneOfGetter(this.l[n].oneof),set:f.oneOfSetter(this.l[n].oneof)};n&&Object.defineProperties(e.prototype,i)}}}),i.generateConstructor=function(e){for(var t,n=f.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e.b[i]).map?n("this%s={}",f.safeProp(t.name)):t.repeated&&n("this%s=[]",f.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},i.fromJSON=function(e,n){var o=new i(e,n.options);o.extensions=n.extensions,o.reserved=n.reserved;for(var u=Object.keys(n.fields),h=0;h<u.length;++h)o.add((t!==n.fields[u[h]].keyType?l.fromJSON:c.fromJSON)(u[h],n.fields[u[h]]));if(n.oneofs)for(u=Object.keys(n.oneofs),h=0;h<u.length;++h)o.add(a.fromJSON(u[h],n.oneofs[u[h]]));if(n.nested)for(u=Object.keys(n.nested),h=0;h<u.length;++h){var d=n.nested[u[h]];o.add((d.id!==t?c.fromJSON:d.fields!==t?i.fromJSON:d.values!==t?s.fromJSON:d.methods!==t?p.fromJSON:r.fromJSON)(u[h],d))}return n.extensions&&n.extensions.length&&(o.extensions=n.extensions),n.reserved&&n.reserved.length&&(o.reserved=n.reserved),n.group&&(o.group=!0),o},i.prototype.toJSON=function(){var e=r.prototype.toJSON.call(this);return f.toObject(["options",e&&e.options||t,"oneofs",r.arrayToJSON(this.oneofsArray),"fields",r.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}))||{},"extensions",this.extensions&&this.extensions.length?this.extensions:t,"reserved",this.reserved&&this.reserved.length?this.reserved:t,"group",this.group||t,"nested",e&&e.nested||t])},i.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},i.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},i.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof c&&e.extend===t){if(this.k?this.k[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),o(this)}return e instanceof a?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),o(this)):r.prototype.add.call(this,e)},i.prototype.remove=function(e){if(e instanceof c&&e.extend===t){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),o(this)}if(e instanceof a){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),o(this)}return r.prototype.remove.call(this,e)},i.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},i.prototype.create=function(e){return new this.ctor(e)},i.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this.b[n].resolve().resolvedType);this.encode=y(this)({Writer:d,types:t,util:f}),this.decode=b(this)({Reader:h,types:t,util:f}),this.verify=m(this)({types:t,util:f}),this.fromObject=g.fromObject(this)({types:t,util:f}),this.toObject=g.toObject(this)({types:t,util:f});var i=v[e];if(i){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(o),o.toObject=this.toObject,this.toObject=i.toObject.bind(o)}return this},i.prototype.encode=function(e,t){return this.setup().encode(e,t)},i.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},i.prototype.decode=function(e,t){return this.setup().decode(e,t)},i.prototype.decodeDelimited=function(e){return e instanceof h||(e=h.create(e)),this.decode(e,e.uint32())},i.prototype.verify=function(e){return this.setup().verify(e)},i.prototype.fromObject=function(e){return this.setup().fromObject(e)},i.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},i.d=function(e){return function(t){f.decorateType(t,e)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(e,t,n){function i(e,t){var n=0,i={};for(t|=0;n<e.length;)i[s[n+t]]=e[n++];return i}var o=n,r=e(37),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];o.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),o["long"]=i([0,0,0,1,1],7),o.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(e,n){var i,o,r=n.exports=e(39),s=e(30);r.codegen=e(3),r.fetch=e(5),r.path=e(8),r.fs=r.inquire("fs"),r.toArray=function(e){if(e){for(var t=Object.keys(e),n=Array(t.length),i=0;i<t.length;)n[i]=e[t[i++]];return n}return[]},r.toObject=function(e){for(var n={},i=0;i<e.length;){var o=e[i++],r=e[i++];r!==t&&(n[o]=r)}return n};var a=/\\/g,c=/"/g;r.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},r.safeProp=function(e){return!/^[$\w_]+$/.test(e)||r.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},r.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;r.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,function(e,t){return t.toUpperCase()})},r.compareFieldsById=function(e,t){return e.id-t.id;
},r.decorateType=function(t,n){if(t.$type)return n&&t.$type.name!==n&&(r.decorateRoot.remove(t.$type),t.$type.name=n,r.decorateRoot.add(t.$type)),t.$type;i||(i=e(35));var o=new i(n||t.name);return r.decorateRoot.add(o),o.ctor=t,Object.defineProperty(t,"$type",{value:o,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:o,enumerable:!1}),o};var p=0;r.decorateEnum=function(t){if(t.$type)return t.$type;o||(o=e(15));var n=new o("Enum"+p++,t);return r.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},Object.defineProperty(r,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(e(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(e,t){function n(e,t){this.lo=e>>>0,this.hi=t>>>0}t.exports=n;var i=e(39),o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var r=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new n(i,r)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(i.isString(e)){if(!i.Long)return n.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,(!!e)):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var s=String.prototype.charCodeAt;n.fromHash=function(e){return e===r?o:new n((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{39:39}],39:[function(n,i,o){function r(e,n,i){for(var o=Object.keys(n),r=0;r<o.length;++r)e[o[r]]!==t&&i||(e[o[r]]=n[o[r]]);return e}function s(e){function t(e,n){return this instanceof t?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),n&&r(this,n),void 0):new t(e,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}var a=o;a.asPromise=n(1),a.base64=n(2),a.EventEmitter=n(4),a["float"]=n(6),a.inquire=n(7),a.utf8=n(10),a.pool=n(9),a.LongBits=n(38),a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isNode=!!(e.process&&e.process.versions&&e.process.versions.node),a.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},a.isString=function(e){return"string"==typeof e||e instanceof String},a.isObject=function(e){return e&&"object"==typeof e},a.isset=a.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},a.Buffer=function(){try{var e=a.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),a.p=null,a.u=null,a.newBuffer=function(e){return"number"==typeof e?a.Buffer?a.u(e):new a.Array(e):a.Buffer?a.p(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},a.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,a.Long=e.dcodeIO&&e.dcodeIO.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(e){return e?a.LongBits.from(e).toHash():a.LongBits.zeroHash},a.longFromHash=function(e,t){var n=a.LongBits.fromHash(e);return a.Long?a.Long.fromBits(n.lo,n.hi,t):n.toNumber(!!t)},a.merge=r,a.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},a.newError=s,a.ProtocolError=s("ProtocolError"),a.oneOfGetter=function(e){for(var n={},i=0;i<e.length;++i)n[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===n[e[i]]&&this[e[i]]!==t&&null!==this[e[i]])return e[i]}},a.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a.e=function(){var e=a.Buffer;return e?(a.p=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},void(a.u=e.allocUnsafe||function(t){return new e(t)})):void(a.p=a.u=null)}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(e,t){function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function i(e,t,i,o){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(%s){",o)("default:")("return%j",n(t,"enum value"));for(var r=Object.keys(t.resolvedType.values),a=0;a<r.length;++a)e("case %i:",t.resolvedType.values[r[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,o)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",n(t,"buffer"))}return e}function o(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",n(t,"boolean key"))}return e}function r(e){var t=a.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,s={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var l=e.b[c].resolve(),p="m"+a.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",p,l.name),l.map)t("if(!util.isObject(%s))",p)("return%j",n(l,"object"))("var k=Object.keys(%s)",p)("for(var i=0;i<k.length;++i){"),o(t,l,"k[i]"),i(t,l,c,p+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",p)("return%j",n(l,"array"))("for(var i=0;i<%s.length;++i){",p),i(t,l,c,p+"[i]")("}");else{if(l.partOf){var u=a.safeProp(l.partOf.name);1===s[l.partOf.name]&&t("if(p%s===1)",u)("return%j",l.partOf.name+": multiple values"),s[l.partOf.name]=1,t("p%s=1",u)}i(t,l,c,p)}l.optional&&t("}")}return t("return null")}t.exports=r;var s=e(15),a=e(37)},{15:15,37:37}],41:[function(e,t,n){var i=n,o=e(21);i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+n,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof o){var r=e.$type.toObject(e,t);return r["@type"]=e.$type.fullName,r}return this.toObject(e,t)}}},{21:21}],42:[function(e,n){function i(e,n,i){this.fn=e,this.len=n,this.next=t,this.val=i}function o(){}function r(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function s(){this.len=0,this.head=new i(o,0,0),this.tail=this.head,this.states=null}function a(e,t,n){t[n]=255&e}function c(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function l(e,n){this.len=e,this.next=t,this.val=n}function p(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function u(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}n.exports=s;var h,d=e(39),f=d.LongBits,y=d.base64,b=d.utf8;s.create=d.Buffer?function(){return(s.create=function(){return new h})()}:function(){return new s},s.alloc=function(e){return new d.Array(e)},d.Array!==Array&&(s.alloc=d.pool(s.alloc,d.Array.prototype.subarray)),s.prototype.v=function(e,t,n){return this.tail=this.tail.next=new i(e,t,n),this.len+=t,this},l.prototype=Object.create(i.prototype),l.prototype.fn=c,s.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new l((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},s.prototype.int32=function(e){return e<0?this.v(p,10,f.fromNumber(e)):this.uint32(e)},s.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},s.prototype.uint64=function(e){var t=f.from(e);return this.v(p,t.length(),t)},s.prototype.int64=s.prototype.uint64,s.prototype.sint64=function(e){var t=f.from(e).zzEncode();return this.v(p,t.length(),t)},s.prototype.bool=function(e){return this.v(a,1,e?1:0)},s.prototype.fixed32=function(e){return this.v(u,4,e>>>0)},s.prototype.sfixed32=s.prototype.fixed32,s.prototype.fixed64=function(e){var t=f.from(e);return this.v(u,4,t.lo).v(u,4,t.hi)},s.prototype.sfixed64=s.prototype.fixed64,s.prototype["float"]=function(e){return this.v(d["float"].writeFloatLE,4,e)},s.prototype["double"]=function(e){return this.v(d["float"].writeDoubleLE,8,e)};var m=d.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};s.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this.v(a,1,0);if(d.isString(e)){var n=s.alloc(t=y.length(e));y.decode(e,n,0),e=n}return this.uint32(t).v(m,t,e)},s.prototype.string=function(e){var t=b.length(e);return t?this.uint32(t).v(b.write,t,e):this.v(a,1,0)},s.prototype.fork=function(){return this.states=new r(this),this.head=this.tail=new i(o,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(o,0,0),this.len=0),this},s.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},s.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},s.e=function(e){h=e}},{39:39}],43:[function(e,t){function n(){o.call(this)}function i(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write(e,n)}t.exports=n;var o=e(42);(n.prototype=Object.create(o.prototype)).constructor=n;var r=e(39),s=r.Buffer;n.alloc=function(e){return(n.alloc=r.u)(e)};var a=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]};n.prototype.bytes=function(e){r.isString(e)&&(e=r.p(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this.v(a,t,e),this},n.prototype.string=function(e){var t=s.byteLength(e);return this.uint32(t),t&&this.v(i,t,e),this}},{39:39,42:42}]},{},[19])}("object"==typeof window&&window||"object"==typeof self&&self||this);var WebsocketGC=function(e,t,n){this.notification=new LobbyNotification,this.debug=!!t,this.socket=null,this.events=[],this.proto=[],this.connected=!1,this.authenticated=!1,this.connections=0,this.heartbeat_interval=null,this.missed_heartbeats=0,this.timeoutHandle=null,this.url=null,this.protoRoot=null,this.authRetry=0,this.localStorageKey="ws-gc",this.authTimer=null,this.console={log:function(e){this.debug&&console.log(e)}.bind(this),error:function(e){this.debug&&console.error(e)}.bind(this)},this.lastMsg=new Date,this.heartTime=n?n:15e3,this.init(e),this.eventsListeners={}};WebsocketGC.prototype.trigger=function(){return this.getjQueryObject().trigger.apply(this.getjQueryObject(),arguments)},WebsocketGC.prototype.getjQueryObject=function(){return this.jQueryObject||(this.jQueryObject=jQuery(this)),this.jQueryObject},WebsocketGC.prototype._dispatchEvent=function(e,t){this.eventsListeners[e]&&this.eventsListeners[e].forEach(function(n){n(e,t)})},WebsocketGC.prototype.addListener=function(e,t){this.eventsListeners[e]||(this.eventsListeners[e]=[]),this.eventsListeners[e].push(t)},WebsocketGC.prototype.closeConn=function(e){this.socket.close(e)},WebsocketGC.prototype.language={socket:{cant_connect:"An error occurred when trying to start the WS Client, please check your internet connection and try refresh again"},auth:{generating_token:"Generating Authentication Token for WS...",max_retry:"Maximum authorization attempt for WS exceeded!",login:"Logging in to WS...",logged:"Login done successfully on WS!!",new_login:"New authentication required by WS!",token:{err:"Unable to get auth token",conn_err:"Unable to get auth token, connection failure"}},protoEvents:{not_found:"Protobuf Event not found: "}},WebsocketGC.prototype.doAuth=function(e){return this.authRetry++,this.authenticated=!1,this.authRetry>=30?(this.console.error(this.language.auth.max_retry),void this.closeConn(1e3)):void jQuery.ajax({url:this.getUrl("authApi"),method:"GET",context:this}).done(function(t){if(!t.success)throw new Error(this.language.auth.token.err);window.localStorage.setItem(this.localStorageKey,JSON.stringify(t.data)),e&&e(t.data)}).fail(function(e){throw new Error(this.language.auth.token.conn_err)})},WebsocketGC.prototype.init=function(e){this.url=e,this.protoRoot=protobuf.Root.fromJSON(this.getProto());var t=JSON.parse(window.localStorage.getItem(this.localStorageKey));null===t||t.id!=PLAYERID?this.doAuth(function(e){this.connect(e)}.bind(this)):this.connect(t)},WebsocketGC.prototype.sendCmd=function(e,t){var n={};n[e.toLowerCase()]=t;var i=this.getProtoEvent("EventClient").encode(n).finish();this.socket.send(i.buffer.slice(i.byteOffset,i.byteOffset+i.length))},WebsocketGC.prototype.sendAuth=function(e){this.sendCmd("Auth",e)},WebsocketGC.prototype.connect=function(e){try{this.socket=new WebSocket(this.url+"?l="+encodeURIComponent(window.location.pathname)),this.socket.binaryType="arraybuffer",this.socket.onmessage=function(t){this.lastMsg=new Date;var n=new Uint8Array(t.data);if(1==n.length&&51==n)return void(this.missed_heartbeats=0);try{var i=this.getProtoEvent("Event").decode(n);if("need"==i.event)if(i.need.need&&!i.need.fail)this.console.log(this.language.auth.login),this.sendAuth(e);else if(i.need.need)this.authenticated=!1,this.trigger("auth_retry"),this._dispatchEvent("auth_retry"),this.console.log(this.language.auth.new_login),window.localStorage.removeItem(this.localStorageKey),this.doAuth(function(e){this.sendAuth(e)}.bind(this));else{var o=1;if(this.connections>1)if("undefined"==typeof lobbyOn)var o=8e3+5e3*Math.random();else if(inPreReady||playerMMOn)var o=500*Math.random();else if(inPickTeam)var o=500+500*Math.random();else if(lobbyOn)var o=1e3+2e3*Math.random();else var o=3e3+5e3*Math.random();null==this.authTimer&&(this.authTimer=setTimeout(function(){this.authenticated=!0,this.trigger("authenticated"),this._dispatchEvent("authenticated"),this.console.log(this.language.auth.logged),this.authTimer=null}.bind(this),Math.floor(o)))}else this.trigger(i.event,i[i.event]),this._dispatchEvent(i.event,i[i.event])}catch(t){t instanceof protobuf.util.ProtocolError?console.error(t.instance):console.error(t)}}.bind(this),this.socket.onclose=function(e){this.connected=!1,this.authenticated=!1,this.missed_heartbeats=0,this.console.error("WS Client Disconnected"),this.trigger("disconnected"),this._dispatchEvent("disconnected"),null!=this.heartbeat_interval&&(clearInterval(this.heartbeat_interval),this.heartbeat_interval=null),null==this.timeoutHandle&&(this.timeoutHandle=setTimeout(function(){this.timeoutHandle=null,this.init(this.url)}.bind(this),1e3*getRandomInt(5,25)))}.bind(this),this.socket.onerror=function(e){this.trigger("connection_error"),this._dispatchEvent("connection_error"),this.console.error("WS Status Client Error",e)}.bind(this),this.socket.onopen=function(e){this.connected=!0,this.connections++,this.connections>1?(this.trigger("reconnected"),this._dispatchEvent("reconnected"),this.console.log("Status Socket Client reconnected")):(this.trigger("connection_ok"),this._dispatchEvent("connection_ok"),this.console.log("Status Socket Client connected")),this.lastMsg=new Date,this.heartbeat_interval=setInterval(function(){try{var e=new Date;if(e.getTime()>this.lastMsg.getTime()+2*this.heartTime?this.missed_heartbeats++:e.getTime()>=this.lastMsg.getTime()+this.heartTime/2&&this.socket.send("2"),this.missed_heartbeats>=2)throw new Error("Too many missed heartbeats.")}catch(t){clearInterval(this.heartbeat_interval),this.heartbeat_interval=null,this.console.error("Closing connection. Reason: "+t.message),this.closeConn(1e3),this.connected=!1,this.authenticated=!1,this.missed_heartbeats=0,this.console.error("WS Client Disconnected"),this.trigger("disconnected"),this._dispatchEvent("disconnected"),null!=this.heartbeat_interval&&(clearInterval(this.heartbeat_interval),this.heartbeat_interval=null),null==this.timeoutHandle&&(this.timeoutHandle=setTimeout(function(){this.timeoutHandle=null,this.init(this.url)}.bind(this),1e3*getRandomInt(1,20))),this.socket.onclose=function(e){}}}.bind(this),this.heartTime)}.bind(this)}catch(t){this.trigger("client_error"),this._dispatchEvent("client_error"),this.console.error("Can't start Status Socket Client: "+t)}},WebsocketGC.prototype.getProtoEvent=function(e){if(null===this.protoRoot.lookup(e))throw new Error(this.language.protoEvents.not_found);return this.proto[e]=this.protoRoot.lookup(e),this.proto[e]},WebsocketGC.prototype.getProto=function(){return{nested:{protobuf:{nested:{Empty:{fields:{}},Auth:{fields:{id:{type:"uint64",id:1},exp:{type:"int64",id:2},token:{type:"string",id:3}}},AuthCamp:{fields:{id:{type:"uint64",id:1},exp:{type:"int64",id:2},camp:{type:"uint64",id:3},match:{type:"uint64",id:4},token:{type:"string",id:5}}},AuthCampExit:{fields:{camp:{type:"uint64",id:1},match:{type:"uint64",id:2}}},NeedAuth:{fields:{need:{type:"bool",id:1},fail:{type:"bool",id:2}}},NeedAuthCamp:{fields:{need:{type:"bool",id:1},fail:{type:"bool",id:2}}},NewNotification:{fields:{friends:{type:"uint32",id:1},msgs:{type:"uint32",id:2},notification:{type:"uint32",id:3},total:{type:"uint32",id:4}}},Alert:{fields:{type:{type:"uint32",id:1},msg:{type:"string",id:2},reload:{type:"bool",id:3}}},LiveTwitch:{fields:{user:{type:"string",id:1},image:{type:"string",id:2},online:{type:"bool",id:3}}},OnlineSwitch:{fields:{status:{type:"bool",id:1},playerid:{type:"uint64",id:2}}},OnlineSwitchSub:{fields:{playerid:{type:"uint64",id:1}}},OnlineSwitchSubs:{fields:{playerids:{rule:"repeated",type:"uint64",id:1}}},OnlineSwitchUnsub:{fields:{playerid:{type:"uint64",id:1}}},CampCheckVetosMaps:{fields:{map:{type:"string",id:1},clanid:{type:"uint64",id:2},veto:{type:"bool",id:3},pick:{type:"bool",id:4},clanName:{type:"string",id:5}}},CampCheckVetosNextAction:{fields:{team:{type:"uint64",id:1},type:{type:"string",id:2}}},CampCheckVetos:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2},finish:{type:"bool",id:3},msg:{type:"string",id:4},nextAction:{type:"CampCheckVetosNextAction",id:5},maps:{type:"string",id:6}}},CampCheckChat:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2},date:{type:"string",id:3},playerid:{type:"uint64",id:4},nick:{type:"string",id:5},msg:{type:"string",id:6},isSystem:{type:"bool",id:7},isAction:{type:"bool",id:8},avatar:{type:"string",id:9}}},CampOnlineInMatch:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2},playerid:{type:"uint64",id:3},nick:{type:"string",id:4},isOffline:{type:"bool",id:5},lastSeen:{type:"string",id:6}}},CampServer:{fields:{status:{type:"bool",id:1},ip:{type:"string",id:2},password:{type:"string",id:3}}},CampCheckMatchReady:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2},team1:{type:"string",id:3},team2:{type:"string",id:4},dataAtualServer:{type:"string",id:5},dataParaReady:{type:"string",id:6},server:{type:"CampServer",id:7}}},CampNeedUpdate:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2}}},CampUpdateScore:{fields:{campid:{type:"uint64",id:1},matchid:{type:"uint64",id:2},score1:{type:"uint32",id:3},score2:{type:"uint32",id:4},finish:{type:"bool",id:5}}},InvitePlayerInfo:{fields:{id:{type:"uint64",id:1},nick:{type:"string",id:2},avatar:{type:"string",id:3},level:{type:"int32",id:4},patente:{type:"uint32",id:5},patenteName:{type:"string",id:6},patenteImage:{type:"string",id:7},reputation:{type:"float",id:8}}},InvitedToLobby:{fields:{lobbyid:{type:"uint64",id:1},player:{type:"InvitePlayerInfo",id:2},friend:{type:"InvitePlayerInfo",id:3}}},InviteToLobby:{fields:{lobbyid:{type:"uint64",id:1},playerid:{type:"uint64",id:2},friendid:{type:"uint64",id:3},friendNick:{type:"string",id:4}}},InviteToLobbyMode:{fields:{lobbyids:{rule:"repeated",type:"uint64",id:1},friendid:{type:"uint64",id:2},friendNick:{type:"string",id:3},mode:{type:"string",id:4}}},AuthLobby:{fields:{id:{type:"uint64",id:1},exp:{type:"int64",id:2},type:{type:"uint32",id:3},room:{type:"uint64",id:4},token:{type:"string",id:5}}},AuthLobbyExit:{fields:{type:{type:"uint32",id:1},room:{type:"uint64",id:2}}},LobbyType:{fields:{type:{type:"uint32",id:1},room:{type:"uint64",id:2}}},LobbyUpdateMMPlayers:{fields:{type:{type:"uint32",id:1},total:{type:"uint64",id:2},date:{type:"string",id:3}}},LobbyRemove:{fields:{lobbyid:{type:"uint64",id:1},preReady:{type:"bool",id:2}}},LobbyRemoveGame:{fields:{gameid:{type:"uint64",id:1}}},LobbyFinishGame:{fields:{gameid:{type:"uint64",id:1}}},LobbyGame:{fields:{gameid:{type:"uint64",id:1},lobbyid:{type:"uint64",id:2},challengedid:{type:"uint64",id:3},date:{type:"string",id:4}}},LobbyMember:{fields:{id:{type:"uint64",id:1},nick:{type:"string",id:2},avatar:{type:"string",id:3},country:{type:"string",id:4},level:{type:"int32",id:5},isPremium:{type:"bool",id:6},isPlus:{type:"bool",id:7},isArgentina:{type:"bool",id:8},patente:{type:"uint32",id:9},patenteName:{type:"string",id:10},patenteImage:{type:"string",id:11},reputation:{type:"float",id:12},status:{type:"uint32",id:13},position:{type:"string",id:14},isCommonUser:{type:"bool",id:15},kdr:{type:"float",id:16},medalhaId:{type:"uint32",id:17},medalhaName:{type:"string",id:18},medalhaLevel:{type:"uint32",id:19}}},LobbyInfo:{fields:{id:{type:"uint64",id:1},status:{type:"uint32",id:2},type:{type:"uint32",id:3},restriction:{type:"uint32",id:4},teamid:{type:"uint64",id:5},adminid:{type:"uint64",id:6},level:{type:"int32",id:7},trainingMode:{type:"bool",id:8},inMatchmaking:{type:"bool",id:9},clan:{type:"string",id:10},clanCard:{type:"string",id:11},clanTag:{type:"string",id:12},clanCountry:{type:"string",id:13},clanAvatar:{type:"string",id:14},hasAdmin:{type:"bool",id:15},playerid:{type:"uint64",id:16},maxMembers:{type:"uint32",id:17},isAllPlayers:{type:"bool",id:18},hash:{type:"string",id:19},members:{rule:"repeated",type:"LobbyMember",id:20},hasPassword:{type:"bool",id:21},password:{type:"string",id:22},adminVictorySequence:{type:"uint32",id:23}}},LobbyChat:{fields:{playerid:{type:"uint64",id:1},nick:{type:"string",id:2},msg:{type:"string",id:3},date:{type:"string",id:4}}},LobbyMemberChange:{fields:{lobbyid:{type:"uint64",id:1},playerid:{type:"uint64",id:2},nick:{type:"string",id:3},msg:{type:"string",id:4},members:{rule:"repeated",type:"LobbyMember",id:5}}},LobbyGamePlayerReady:{fields:{gameid:{type:"uint64",id:1},playerid:{type:"uint64",id:2},date:{type:"string",id:3}}},LobbyGameStart:{fields:{gameid:{type:"uint64",id:1},date:{type:"string",id:2}}},LobbyGameVetos:{fields:{gameid:{type:"uint64",id:1},done:{type:"bool",id:2},voted:{type:"uint32",id:3},maps:{rule:"repeated",type:"map",id:4},date:{type:"string",id:6}},nested:{map:{fields:{id:{type:"uint32",id:1},name:{type:"string",id:2},vetoed:{type:"veto",id:3},sort:{type:"uint32",id:4}},nested:{veto:{fields:{pick:{type:"bool",id:1},room:{type:"bool",id:2},done:{type:"bool",id:3}}}}}}},LobbyModeChange:{fields:{gameid:{type:"uint64",id:1},requesterid:{type:"uint64",id:2},mode:{type:"string",id:3},accept:{type:"bool",id:4},value:{type:"bool",id:5},date:{type:"string",id:6},data:{type:"uint32",id:7}}},LobbyServerWaiting:{fields:{gameid:{type:"uint64",id:1},waitingTime:{type:"uint32",id:2},date:{type:"string",id:3}}},LobbyServerReady:{fields:{gameid:{type:"uint64",id:1},ip:{type:"string",id:2},password:{type:"string",id:3},tsHost:{type:"string",id:4},tsChannelA:{type:"string",id:5},tsChannelB:{type:"string",id:6},tsPassword:{type:"string",id:7},date:{type:"string",id:8}}},LobbyInviteChallenge:{fields:{lobbyid:{type:"uint64",id:1},challengedid:{type:"uint64",id:2},status:{type:"uint32",id:3}}},LobbyPickTeamPlayerPick:{fields:{pickid:{type:"uint64",id:1},playerid:{type:"uint64",id:2},adminid:{type:"uint64",id:3},exp:{type:"int64",id:4},total:{type:"uint32",id:5},done:{type:"bool",id:6},random:{type:"bool",id:7}}},LobbyPickTeamStart:{fields:{id:{type:"uint64",id:1},players:{rule:"repeated",type:"uint64",id:2}}},LobbyGameRemoved:{fields:{gameid:{type:"uint64",id:1},bans:{rule:"repeated",type:"banned",id:2}},nested:{banned:{fields:{playerid:{type:"uint64",id:1},time:{type:"uint32",id:2},reason:{type:"uint32",id:3},nick:{type:"string",id:4}}}}},LobbyGameFinished:{fields:{gameid:{type:"uint64",id:1},bans:{rule:"repeated",type:"banned",id:2},levels:{keyType:"string",type:"int32",id:3}},nested:{banned:{fields:{playerid:{type:"uint64",id:1},time:{type:"uint32",id:2},reason:{type:"uint32",id:3},nick:{type:"string",id:4}}}}},LobbyPreReady:{fields:{id:{type:"uint64",id:1},lobbyid:{type:"uint64",id:2},challengedid:{type:"uint64",id:3},players:{rule:"repeated",type:"uint64",id:4},expire:{type:"uint32",id:5},mm:{type:"uint32",id:6},total:{type:"uint32",id:7},done:{type:"bool",id:8}}},LobbyPreReadyFail:{fields:{id:{type:"uint64",id:1},lobbyid:{type:"uint64",id:2},challengedid:{type:"uint64",id:3},players:{rule:"repeated",type:"uint64",id:4},kicks:{rule:"repeated",type:"uint64",id:5},error:{type:"bool",id:6},mm:{type:"uint32",id:7},msg:{type:"string",id:8}}},LobbyComplete:{fields:{gameid:{type:"uint64",id:1},playerid:{type:"uint64",id:2},hide:{type:"bool",id:3},score1:{type:"uint32",id:4},score2:{type:"uint32",id:5},map:{type:"string",id:6},ranked:{type:"uint32",id:7}}},LobbyClientChat:{fields:{type:{type:"uint32",id:1},room:{type:"uint64",id:2},playerid:{type:"uint64",id:3},msg:{type:"string",id:4},date:{type:"string",id:5},block:{type:"bool",id:6}}},ChatDataSend:{fields:{data:{type:"string",id:1},event:{type:"string",id:2}}},ChatDataReceive:{fields:{data:{type:"string",id:1},date:{type:"string",id:2},event:{type:"string",id:3}}},Event:{oneofs:{event:{oneof:["need","notification","alert","onlineswitch","liveTwitch","campNeedauth","campCheckvetos","campCheckchat","campOnlineinmatch","campMatchready","campNeedupdate","campUpdateScore","invitedToLobby","inviteToLobbyCanceled","inviteToLobbyAccepted","inviteToLobbyRefused","inviteToLobbyExpired","lobbyRegister","lobbyUnregister","lobbyPreReadyStart","lobbyPreReadyChange","lobbyPreReadyFail","lobbyUpdateMMPlayers","lobbyPickTeamPlayerPick","lobbyPickTeamStart","lobbyCreate","lobbyUpdate","lobbyPrivateUpdate","lobbyMemberKicked","lobbyMemberJoin","lobbyMemberLeft","lobbyExpire","lobbyRemove","lobbyRemoveGame","lobbyFinishGame","lobbyInGame","lobbyLiveGame","lobbyInviteChallenge","lobbyStartLobbyGame","lobbyClientChat","lobbyGamePlayerReady","lobbyGameStart","lobbyGameVetos","lobbyGameModeChange","lobbyGameModeChangeRequest","lobbyGameServerWaiting","lobbyGameServerReady","lobbyGameRemoved","lobbyGameFinished","lobbyComplete","chatData"]}},fields:{need:{type:"NeedAuth",id:1},notification:{type:"NewNotification",id:2},alert:{type:"Alert",id:3},onlineswitch:{type:"OnlineSwitch",id:4},liveTwitch:{type:"LiveTwitch",id:90},campNeedauth:{type:"NeedAuthCamp",id:5},campCheckvetos:{type:"CampCheckVetos",id:6},campCheckchat:{type:"CampCheckChat",id:7},campOnlineinmatch:{type:"CampOnlineInMatch",id:8},campMatchready:{type:"CampCheckMatchReady",id:9},campNeedupdate:{type:"CampNeedUpdate",id:10},campUpdateScore:{type:"CampUpdateScore",id:11},invitedToLobby:{type:"InvitedToLobby",id:15},inviteToLobbyCanceled:{type:"InviteToLobby",id:16},inviteToLobbyAccepted:{type:"InviteToLobby",id:17},inviteToLobbyRefused:{type:"InviteToLobby",id:18},inviteToLobbyExpired:{type:"InviteToLobbyMode",id:19},lobbyRegister:{type:"LobbyType",id:25},lobbyUnregister:{type:"LobbyType",id:26},lobbyPreReadyStart:{type:"LobbyPreReady",id:27},lobbyPreReadyChange:{type:"LobbyPreReady",id:28},lobbyPreReadyFail:{type:"LobbyPreReadyFail",id:29},lobbyUpdateMMPlayers:{type:"LobbyUpdateMMPlayers",id:30},lobbyPickTeamPlayerPick:{type:"LobbyPickTeamPlayerPick",id:31},lobbyPickTeamStart:{type:"LobbyPickTeamStart",id:32},lobbyCreate:{type:"LobbyInfo",id:35},lobbyUpdate:{type:"LobbyInfo",id:36},lobbyPrivateUpdate:{type:"LobbyInfo",id:37},lobbyMemberKicked:{type:"LobbyMemberChange",id:38},lobbyMemberJoin:{type:"LobbyMemberChange",id:39},lobbyMemberLeft:{type:"LobbyMemberChange",id:40},lobbyExpire:{type:"LobbyRemove",id:42},lobbyRemove:{type:"LobbyRemove",id:43},lobbyRemoveGame:{type:"LobbyRemoveGame",id:44},lobbyFinishGame:{type:"LobbyFinishGame",id:45},lobbyInGame:{type:"LobbyGame",id:46},lobbyLiveGame:{type:"LobbyGame",id:47},lobbyInviteChallenge:{type:"LobbyInviteChallenge",id:50},lobbyStartLobbyGame:{type:"LobbyInviteChallenge",id:51},lobbyClientChat:{type:"LobbyClientChat",id:60},lobbyGamePlayerReady:{type:"LobbyGamePlayerReady",id:70},lobbyGameStart:{type:"LobbyGameStart",id:71},lobbyGameVetos:{type:"LobbyGameVetos",id:72},lobbyGameModeChange:{type:"LobbyModeChange",id:73},lobbyGameModeChangeRequest:{type:"LobbyModeChange",id:74},lobbyGameServerWaiting:{type:"LobbyServerWaiting",id:75},lobbyGameServerReady:{type:"LobbyServerReady",id:76},lobbyGameRemoved:{type:"LobbyGameRemoved",id:77},lobbyGameFinished:{type:"LobbyGameFinished",id:78},lobbyComplete:{type:"LobbyComplete",id:80},chatData:{type:"ChatDataReceive",id:99}}},EventClient:{oneofs:{event:{oneof:["auth","authcamp","exitcamp","authlobby","exitlobby","chatlobby","chatdata","onlinesub","onlineunsub","onlinesubs"]}},fields:{auth:{type:"Auth",id:1},authcamp:{type:"AuthCamp",id:2},exitcamp:{type:"AuthCampExit",id:3},authlobby:{type:"AuthLobby",id:4},exitlobby:{type:"AuthLobbyExit",id:5},chatlobby:{type:"LobbyClientChat",id:6},chatdata:{type:"ChatDataSend",id:7},onlinesub:{type:"OnlineSwitchSub",id:8},onlineunsub:{type:"OnlineSwitchUnsub",id:9},onlinesubs:{type:"OnlineSwitchSubs",id:10}}}}}}}},WebsocketGC.prototype.getUrl=function(e){return this.urls.prefix+this.urls[e]},WebsocketGC.prototype.urls={prefix:"",authApi:"/api/player/ws-auth-token"};var ChatWebSocket;window.$GCWebSocket=null,$(document).ready(function(){var e="undefined"!=typeof LobbyWebSocket?2e3:15e3;window.$GCWebSocket=new WebsocketGC(STATUSX_SOCKET+"/ws",(!0),e);new PlayerStatusWS(window.$GCWebSocket),new InvitesWS(window.$GCWebSocket),new CompletePlayerWS(window.$GCWebSocket),new LatencyWS(window.$GCWebSocket);"undefined"!=typeof CampWebSocket&&(CampWebSocket=new CampWS(window.$GCWebSocket,CampWebSocket[0],CampWebSocket[1],WSCAMP_SOCKET_TOKEN)),
"undefined"!=typeof LobbyWebSocket&&(LobbyWebSocket=new LobbyWS(window.$GCWebSocket,123))});var PlayerStatusWS=function(e){if(this.socket=e,"undefined"==typeof e)throw new Error(this.language.socket.none);this.init()};PlayerStatusWS.prototype.language={socket:{none:"WebsocketGC is needed for PlayerStatusWS"}},PlayerStatusWS.prototype.init=function(){$(this.socket).on("onlineswitch",this.playerOnlineStatus.bind(this)),$(this.socket).on("notification",this.newNotification.bind(this)),$(this.socket).on("alert",this.newAlert.bind(this)),$(this.socket).on("liveTwitch",this.liveTwitch.bind(this))},PlayerStatusWS.prototype.newNotification=function(e,t){t.notificacoes=t.notification,NotificationUI.parseNotificationCounters(t)},PlayerStatusWS.prototype.newAlert=function(e,t){return 50===t.type?void toggleLiveItem({id:Number.parseInt(t.msg),online:t.reload}):void this.showAlert(t.type,t.msg,t.reload)},PlayerStatusWS.prototype.liveTwitch=function(e,t){"object"==typeof window.headerAppTransporter&&headerAppTransporter.setLiveItems([t])},PlayerStatusWS.prototype.playerOnlineStatus=function(e,t){var n=$("#player-status-indicator-"+t.playerid);n&&(t.status?n.removeClass("offline").addClass("online"):n.removeClass("online").addClass("offline"))},PlayerStatusWS.prototype.showAlert=function(e,t,n){var i={timeout:1e4,callbacks:{afterClose:function(){n&&window.location.reload()}.bind(n)}};switch(e){case 1:this.socket.notification.warning(t,i);break;case 2:this.socket.notification.error(t,i);break;case 3:this.socket.notification.lobbyToggle();break;case 4:common.modal.abrirModal("modal-fourfun-subscription","/modal/fourfunSubscription","#modal-fourfun",!1);break;case 5:var o=processAdminNotification(t,i);this.socket.notification.notice(o.text,o);break;default:this.socket.notification.notice(t,i)}};var CampWS=function(e,t,n,i){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.authToken=i,this.authRetry=0,this.authenticated=!1,this.matchID=n,this.campID=t,this.console=this.socket.console,this.init()};CampWS.prototype.language={socket:{none:"WebsocketGC is needed for CampWS"},auth:{generating_token:"Generating Authentication Token for Camp WS...",max_retry:"Maximum authorization attempt for Camp WS exceeded!",login:"Logging in to Camp WS...",logged:"Login done successfully on Camp WS!!",new_login:"New authentication required by Camp WS!",token:{err:"Unable to get camp auth token",conn_err:"Unable to get camp auth token, connection failure"}}},CampWS.prototype.init=function(){$(this.socket).on("authenticated",this.checkAuth.bind(this)),0!=this.matchID&&($(this.socket).on("campNeedauth",this.campNeedauth.bind(this)),$(this.socket).on("campCheckchat",this.campCheckchat.bind(this)),$(this.socket).on("campCheckvetos",this.campCheckvetos.bind(this)),$(this.socket).on("campMatchready",this.campMatchready.bind(this)),$(this.socket).on("campNeedupdate",this.campNeedupdate.bind(this)),$(this.socket).on("campOnlineinmatch",this.campOnlineinmatch.bind(this))),$(this.socket).on("campUpdateScore",this.campUpdateScore.bind(this)),this.socket.authenticated&&this.checkAuth()},CampWS.prototype.checkAuth=function(){if(!this.authenticated){var e=this.authToken;null===e?this.doAuth(function(e){this.sendAuth(e)}.bind(this)):this.sendAuth(e)}},CampWS.prototype.sendAuth=function(e){this.socket.sendCmd("AuthCamp",e)},CampWS.prototype.doAuth=function(e){return this.authRetry++,this.authRetry>=3?(this.console.error(this.language.auth.max_retry),void this.socket.closeConn(1e3)):void jQuery.ajax({url:this.getUrl("authApi")+"/"+this.matchID+"/"+this.campID,method:"GET",context:this}).done(function(t){if(!t.success)throw new Error(this.language.auth.token.err);this.authToken=t.data,e&&e(t.data)}).fail(function(e){throw new Error(this.language.auth.token.conn_err)})},CampWS.prototype.campNeedauth=function(e,t){t.need&&t.fail?(this.authToken=null,this.doAuth(function(e){this.sendAuth(e)}.bind(this))):this.console.log(this.language.auth.logged)},CampWS.prototype.campCheckvetos=function(e,t){t.vetosFinalizado="undefined"!=typeof t.finish&&(t.vetosFinalizado=t.finish),t.message=t.msg,t.next_action=t.nextAction,t.maps=JSON.parse(t.maps),t.map=t.maps,refreshMapList(t)},CampWS.prototype.campCheckchat=function(e,t){t.date=tzDate(t.date),appendMessageToChat(t)},CampWS.prototype.campOnlineinmatch=function(e,t){t.id=t.playerid,"undefined"!=typeof t.isOffline&&(t.is_offline=t.isOffline),onlineInMatchItemEvent(t)},CampWS.prototype.campMatchready=function(e,t){t.teams={a:{status:null},b:{status:null}},"undefined"!=typeof t.team1&&""!=t.team1&&(t.teams.a.status=t.team1),"undefined"!=typeof t.team2&&""!=t.team2&&(t.teams.b.status=t.team2),checkReady(t)},CampWS.prototype.campNeedupdate=function(){needUpdate()},CampWS.prototype.campUpdateScore=function(e,t){if(console.log(t),0==this.matchID){var n="primary",i="primary";t.score1>t.score2?(n="success",i="danger"):t.score1<t.score2&&(n="danger",i="success"),document.querySelectorAll("#score1_"+ +t.matchid).forEach(function(e){e.innerHTML='<span class="label label-'+n+'">'+("0"+t.score1).slice(-2)+"</span>"}),document.querySelectorAll("#score2_"+ +t.matchid).forEach(function(e){e.innerHTML='<span class="label label-'+i+'">'+("0"+t.score2).slice(-2)+"</span>"});var o=document.getElementById("partidaTR-"+t.matchid);if(null!=o){var r=o.querySelector(".badge-score-match");null!=r&&(t.finish?(o.classList.add("success"),r.classList.remove("lose"),r.classList.add("winner"),r.innerText="Finalizada"):(r.classList.add("lose"),r.innerText="LIVE"))}var s=document.getElementById("partidaTRHJ-"+t.matchid);if(null!=s){var r=s.querySelector(".badge-score-match");null!=r&&(t.finish?(s.classList.add("success"),r.classList.remove("lose"),r.classList.add("winner"),r.innerText="Finalizada"):(r.classList.add("lose"),r.innerText="LIVE"))}}else if(this.matchID==t.matchid){var n="info",i="info";t.score1>t.score2?(n="winner",i="loser"):t.score1<t.score2&&(n="loser",i="winner");var a=document.getElementById("matchscore1");null!=a&&(a.innerHTML='<span class="team-bar-'+n+'">'+t.score1+"</span>");var c=document.getElementById("matchscore2");null!=c&&(c.innerHTML='<span class="team-bar-'+i+'">'+t.score2+"</span>")}},CampWS.prototype.getUrl=function(e){return this.urls.prefix+this.urls[e]},CampWS.prototype.urls={prefix:"",authApi:"/api/player/ws-camp-auth-token"};var InvitesWS=function(e){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.reconnect=!1,lobbyInvites=new LobbyInvite,$(lobbyInvites).on("getAllInvitesAlways",function(e,t){$(".lobby-convites .loader-spin").hide()}).on("getAllInvitesDone",function(e,t){lobbyInvitesItems=new Object,Object.keys(t.invites).map(function(e){lobbyInvitesItems[t.invites[e].idlobby_room]=t.invites[e]}),renderInvitesWidget(lobbyInvitesItems)}).on("acceptInviteDone",function(e,t){window.location.href="/j/"+t.lobby.id+(t.lobby.password?"/"+t.lobby.password:"")}).on("acceptInviteFail",function(e,t){alert(t.message)}).on("refuseAllInvitesDone",function(e,t){removeInvitesFromList(t.lobbys)}),this.init()};InvitesWS.prototype.language={socket:{none:"WebsocketGC is needed for InvitesWS"}},InvitesWS.prototype.init=function(){$(this.socket).on("invitedToLobby",this.invitedToLobby.bind(this)),$(this.socket).on("inviteToLobbyCanceled",this.inviteToLobbyCanceled.bind(this)),$(this.socket).on("inviteToLobbyAccepted",this.inviteToLobbyAccepted.bind(this)),$(this.socket).on("inviteToLobbyRefused",this.inviteToLobbyRefused.bind(this)),$(this.socket).on("inviteToLobbyExpired",this.inviteToLobbyExpired.bind(this)),$(this.socket).on("authenticated",this.authenticated.bind(this)),$(this.socket).on("disconnected",this.disconnected.bind(this))},InvitesWS.prototype.authenticated=function(){this.reconnect?lobbyInvites.getAllInvites():(Object.keys(invitesFromLobby).map(function(e){lobbyInvitesItems[invitesFromLobby[e].idlobby_room]=invitesFromLobby[e]}),renderInvitesWidget(lobbyInvitesItems)),$(".lobby-convites .loader-spin").show(),this.reconnect=!1},InvitesWS.prototype.disconnected=function(){this.reconnect=!0},InvitesWS.prototype.invitedToLobby=function(e,t){t.friend.id==PLAYERID&&(addInviteToList({idplayer:t.player.id,idfriend:t.friend.id,idlobby_room:t.lobbyid,invited_nick:t.friend.nick,inviter_nick:t.player.nick,invited_avatar:t.friend.avatar,inviter_avatar:t.player.avatar,invited_level:t.friend.level,inviter_level:t.player.level,invited_patente_id:t.player.patente,inviter_patente_id:t.friend.patente,invited_patente_name:t.friend.patenteName,inviter_patente_name:t.player.patenteName,invited_patente_image:t.friend.patenteImage,inviter_patente_image:t.player.patenteImage,invited_reputation:t.friend.reputation,inviter_reputation:t.player.reputation}),InviteSounds.inviteReceived())},InvitesWS.prototype.inviteToLobbyCanceled=function(e,t){t.friendid==PLAYERID&&removeInviteFromList(t.lobbyid)},InvitesWS.prototype.inviteToLobbyAccepted=function(e,t){t.friendid==PLAYERID&&removeInviteFromList(t.lobbyid)},InvitesWS.prototype.inviteToLobbyRefused=function(e,t){t.friendid==PLAYERID&&removeInviteFromList(t.lobbyid)},InvitesWS.prototype.inviteToLobbyExpired=function(e,t){t.mode.length&&t.friendid==PLAYERID?removeInvitesFromList(t.lobbyids):t.lobbyids[0]&&removeInviteFromList(t.lobbyids[0])};var CompletePlayerWS=function(e){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.completePlayerAPI=new CompletePlayerAPI,this.completePlayerRender=new CompletePlayerRender,this.init()};CompletePlayerWS.prototype.language={socket:{none:"WebsocketGC is needed for CompletePlayerWS"}},CompletePlayerWS.prototype.init=function(){$(this.socket).on("lobbyComplete",this.request.bind(this))},CompletePlayerWS.prototype.request=function(e,t){this.completePlayerRender.addRequest(t)};var LobbyWS=function(e,t){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.register=!1,this.reconnected=!1,this.console=this.socket.console,this.bufferCmds=[],this.init()};LobbyWS.prototype.language={socket:{none:"WebsocketGC is needed for LobbyWS"},auth:{generating_token:"Generating Authentication Token for Camp WS...",max_retry:"Maximum authorization attempt for Camp WS exceeded!",login:"Logging in to Lobby WS...",logged:"Login done successfully on Lobby WS!!"}},LobbyWS.prototype.init=function(){$(this.socket).on("authenticated",this.checkAuth.bind(this)),$(this.socket).on("disconnected",this.disconnected.bind(this)),$(this.socket).on("lobbyRegister",this.lobbyRegister.bind(this)),$(this.socket).on("lobbyUnregister",this.lobbyUnregister.bind(this)),$(this.socket).on("lobbyPreReadyStart",this.lobbyPreReadyStart.bind(this)),$(this.socket).on("lobbyPreReadyChange",this.lobbyPreReadyChange.bind(this)),$(this.socket).on("lobbyPreReadyFail",this.lobbyPreReadyFail.bind(this)),$(this.socket).on("lobbyUpdateMMPlayers",this.lobbyUpdateMMPlayers.bind(this)),$(this.socket).on("lobbyPickTeamPlayerPick",this.lobbyPickTeamPlayerPick.bind(this)),$(this.socket).on("lobbyPickTeamStart",this.lobbyPickTeamStart.bind(this)),$(this.socket).on("lobbyCreate",this.lobbyCreate.bind(this)),$(this.socket).on("lobbyUpdate",this.lobbyUpdate.bind(this)),$(this.socket).on("lobbyPrivateUpdate",this.lobbyPrivateUpdate.bind(this)),$(this.socket).on("lobbyMemberKicked",this.lobbyMemberKicked.bind(this)),$(this.socket).on("lobbyMemberJoin",this.lobbyMemberJoin.bind(this)),$(this.socket).on("lobbyMemberLeft",this.lobbyMemberLeft.bind(this)),$(this.socket).on("lobbyExpire",this.lobbyExpire.bind(this)),$(this.socket).on("lobbyRemove",this.lobbyRemove.bind(this)),$(this.socket).on("lobbyRemoveGame",this.lobbyRemoveGame.bind(this)),$(this.socket).on("lobbyFinishGame",this.lobbyFinishGame.bind(this)),$(this.socket).on("lobbyInGame",this.lobbyInGame.bind(this)),$(this.socket).on("lobbyLiveGame",this.lobbyLiveGame.bind(this)),$(this.socket).on("lobbyInviteChallenge",this.lobbyInviteChallenge.bind(this)),$(this.socket).on("lobbyStartLobbyGame",this.lobbyStartLobbyGame.bind(this)),$(this.socket).on("lobbyClientChat",this.lobbyClientChat.bind(this)),$(this.socket).on("lobbyGamePlayerReady",this.lobbyGamePlayerReady.bind(this)),$(this.socket).on("lobbyGameStart",this.lobbyGameStart.bind(this)),$(this.socket).on("lobbyGameVetos",this.lobbyGameVetos.bind(this)),$(this.socket).on("lobbyGameModeChange",this.lobbyGameModeChange.bind(this)),$(this.socket).on("lobbyGameModeChangeRequest",this.lobbyGameModeChangeRequest.bind(this)),$(this.socket).on("lobbyGameServerWaiting",this.lobbyGameServerWaiting.bind(this)),$(this.socket).on("lobbyGameServerReady",this.lobbyGameServerReady.bind(this)),$(this.socket).on("invitedToLobby",this.invitedToLobby.bind(this)),$(this.socket).on("inviteToLobbyCanceled",this.inviteToLobbyCanceled.bind(this)),$(this.socket).on("inviteToLobbyAccepted",this.inviteToLobbyAccepted.bind(this)),$(this.socket).on("inviteToLobbyRefused",this.inviteToLobbyRefused.bind(this)),$(this.socket).on("inviteToLobbyExpired",this.inviteToLobbyExpired.bind(this)),$(this.socket).on("lobbyGameRemoved",this.lobbyGameRemoved.bind(this)),$(this.socket).on("lobbyGameFinished",this.lobbyGameFinished.bind(this)),$(this.socket).on("lobbyComplete",this.lobbyDebugConsole.bind(this)),this.socket.authenticated&&this.checkAuth()},LobbyWS.prototype.subscribe=function(e){this.register?this.socket.sendCmd("AuthLobby",e):this.bufferCmds.push({key:"AuthLobby",value:e})},LobbyWS.prototype.unsubscribe=function(e){this.register?this.socket.sendCmd("ExitLobby",e):this.bufferCmds.push({key:"ExitLobby",value:e})},LobbyWS.prototype.checkAuth=function(){if(lobby.connected=!0,lobby.trigger("connection_ok"),lobby.startLobby(),!this.register){for(this.console.log(this.language.auth.login),this.socket.sendCmd("AuthLobby",{});this.bufferCmds.length;){var e=this.bufferCmds.shift();this.socket.sendCmd(e.key,e.value)}this.reconnected&&(inPickTeam?openPickTeam():gameOn?(window.windowWasRefreshed=!0,openGame()):lobbyOn?(openLobby(),lobbyRecommendationsWidget.setHasLobby(!0)):playerMMOn&&(inMatchMaking=!1,playNow(lobbyMMType[playerMMType])),inPreReady!==!1&&(null!=startPreReadyTime&&(inPreReady[3]-=Math.floor(((new Date).getTime()-startPreReady.getTime())/1e3)),inPreReady[3]>0?(0!=inPreReady[4]&&this.subscribe(playerMMToken),startPreReady(inPreReady[0],inPreReady[1],inPreReady[2],inPreReady[3],inPreReady[4])):inPreReady[2]?window.location.reload(!0):preReadyExpiredEnd({roomID:inPreReady[0],kicks:[PLAYERID],isMM:inPreReady[4]})),showPlayNowBtn(),this.reconnected=!1,$("#disconnectedOverlayNew").hide())}},LobbyWS.prototype.disconnected=function(){lobby.connected=!1,lobby.stopLobby(),this.register=!1,this.reconnected=!0,$("#disconnectedOverlayNew").show()},LobbyWS.prototype.lobbyGameRemoved=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&(lobby.getGame().stop(),t.bans.forEach(function(e){var t=null;t=1==e.reason?IS_LOCK_REPUTATION_ENABLED?PLAYER_NOT_READY_LOST_REP.replace("%%nick%%",e.nick):PLAYER_NOT_READY_BAN.replace("%%min%%",e.time).replace("%%nick%%",e.nick):IS_LOCK_REPUTATION_ENABLED?PLAYER_NO_VETO_LOST_REP.replace("%%nick%%",e.nick):PLAYER_NO_VETO_BAN.replace("%%min%%",e.time).replace("%%nick%%",e.nick),errorAlert(t)}))},LobbyWS.prototype.lobbyGameFinished=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&(lobby.getGame().stop(),redirectUserToVote(gameOn.game.gameID),t.bans.forEach(function(e){var t=null;t=IS_LOCK_REPUTATION_ENABLED?PLAYER_NOT_PLAYED_LOST_REP.replace("%%nick%%",e.nick):PLAYER_NOT_PLAYED_BAN.replace("%%min%%",e.time).replace("%%nick%%",e.nick),errorAlert(t)}),t.level&&t.level[PLAYERID]&&changeUserLevel(t.level[PLAYERID]),renderGame(!1,!0),renderLobby(!1),successAlert(THANK_YOU))},LobbyWS.prototype.lobbyPickTeamPlayerPick=function(e,t){var n=lobby.getPickTeam();n&&n.getPickTeamData().pickid==t.pickid&&(playerPicked({idplayer:t.playerid,idadmin:t.adminid,member:n.getMember(t.playerid),admin:n.getMember(t.adminid),expire_at:t.exp,total:t.total,random:t.random}),t.done&&pickTeam.renderPickTeamLastMessage())},LobbyWS.prototype.lobbyPickTeamStart=function(e,t){t.players.indexOf(PLAYERID)!=-1&&startedPickTeamFromSocket({preReadyRoom:t.id})},LobbyWS.prototype.lobbyStartLobbyGame=function(e,t){waitingDialog.hide(),gameLobbyStart()},LobbyWS.prototype.lobbyGamePlayerReady=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&(gamePlayerReady({idplayer:t.playerid,date:t.date}),playSound("onPlayerReady","2"))},LobbyWS.prototype.lobbyGameStart=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&(gameStart({idplayer:t.playerid,date:t.date}),playSound("onAllPlayersReady"))},LobbyWS.prototype.lobbyGameVetos=function(e,t){if(gameOn&&gameOn.game.gameID==t.gameid){var n={};t.maps.forEach(function(e){n[e.id]={name:e.name,sort:e.sort,vetoed:!1},e.vetoed.done&&(n[e.id].vetoed={pick:e.vetoed.pick,room:e.vetoed.room})}),renderGameMaps(n,t.voted,t.date),t.done?(renderGameBtn(1),$("#clock, #clock2").simpleCountdown({until:60,onExpiry:gameExpire}),playSound("onVetoMapsDone")):playSound("onVetoMap")}},LobbyWS.prototype.lobbyGameModeChange=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&gameModeChange({roomRequester:t.requesterid,gameMode:t.mode,value:t.value,accept:t.accept,data:t.data,date:t.date?t.date:(new Date).toISOString()})},LobbyWS.prototype.lobbyGameModeChangeRequest=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&gameModeChangeRequest({roomRequester:t.requesterid,gameMode:t.mode,value:t.value,data:t.data,date:t.date?t.date:(new Date).toISOString()})},LobbyWS.prototype.lobbyGameServerWaiting=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&gameWaitingServer({waitingTime:t.waitingTime,date:t.date?t.date:(new Date).toISOString()})},LobbyWS.prototype.lobbyGameServerReady=function(e,t){gameOn&&gameOn.game.gameID==t.gameid&&(gameServerReady({ip:t.ip,password:t.password,ts_host:t.tsHost,ts_channel_a:t.tsChannelA,ts_channel_b:t.tsChannelB,ts_password:t.tsPassword,date:t.date?t.date:(new Date).toISOString()}),playSound("onServerAvailable"))},LobbyWS.prototype.sendChat=function(e,t,n){this.register?this.socket.sendCmd("ChatLobby",{type:e,room:t,msg:n}):this.bufferCmds.push({key:"ChatLobby",value:{type:e,room:t,msg:n}})},LobbyWS.prototype.lobbyClientChat=function(e,t){switch(t.type){case 1:lobbyOn&&lobbyOn.lobby.lobbyID==t.room&&lobbyOn.members[t.playerid]&&renderChatMessage({idplayer:t.playerid,msg:t.msg,member:lobbyOn.members[t.playerid],date:t.date,block:t.block});break;case 3:var n=lobby.getPickTeam();n&&n.getPickTeamData().pickid==t.room&&renderPickTeamChatMessage({idplayer:t.playerid,msg:t.msg,member:n.getMember(t.playerid),date:t.date,block:t.block});break;case 4:gameOn&&gameOn.game.gameID==t.room&&(gameOn.room_a.members[t.playerid]||gameOn.room_b.members[t.playerid])&&renderGameChatMessage({idplayer:t.playerid,msg:t.msg,member:gameOn.room_a.members[t.playerid]||gameOn.room_b.members[t.playerid],date:t.date,block:t.block});break;default:console.log("Invalid Msg Channel")}},LobbyWS.prototype.lobbyRegister=function(e,t){0==t.type&&(this.register=!0)},LobbyWS.prototype.lobbyUnregister=function(e,t){this.console.log(this.language.auth.logged),0==t.type&&(this.register=!1)},LobbyWS.prototype.lobbyCreate=function(e,t){var n=t.id,i={};i[n]={lobbyID:t.id,status:t.status,type:t.type,restriction:t.restriction,idteam:t.teamid,idadmin:t.adminid,level:t.level,training_mode:t.trainingMode,in_matchmaking:t.inMatchmaking,clanCard:t.clanCard,clan:t.clan,clanTAG:t.clanTag,clanCountry:t.clanCountry,clanAvatar:t.clanAvatar,hasAdmin:t.hasAdmin,hasPassword:t.hasPassword,idplayer:t.playerid,maxMembers:t.maxMembers,isAllPayers:t.isAllPlayers,hash:t.hash,adminVictorySequence:t.adminVictorySequence},i[n].members=this.membersArrayToMap(t.members,n),0!=t.teamid&&i[n].members[PLAYERID]&&t.adminid!=PLAYERID&&openLobby(),renderLobbyList(i)},LobbyWS.prototype.lobbyUpdate=function(e,t){var n=t.id,i={};i[n]={lobbyID:t.id,status:t.status,type:t.type,restriction:t.restriction,idteam:t.teamid,idadmin:t.adminid,level:t.level,training_mode:t.trainingMode,in_matchmaking:t.inMatchmaking,clanCard:t.clanCard,clan:t.clan,clanTAG:t.clanTag,clanCountry:t.clanCountry,clanAvatar:t.clanAvatar,hasAdmin:t.hasAdmin,hasPassword:t.hasPassword,idplayer:t.playerid,maxMembers:t.maxMembers,isAllPayers:t.isAllPlayers,hash:t.hash,adminVictorySequence:t.adminVictorySequence},i[n].members=this.membersArrayToMap(t.members,n),renderLobbyList(i)},LobbyWS.prototype.lobbyPrivateUpdate=function(e,t){checkLobbyOn()&&lobbyOn.lobby.lobbyID==t.id&&updateLobbyInfo({lobbyID:t.id,training_mode:t.trainingMode,hasAdmin:t.hasAdmin,hasPassword:t.hasPassword,password:t.password,hash:t.hash})},LobbyWS.prototype.lobbyMemberKicked=function(e,t){var n=lobby.getRoom();if(t.playerid==n.getRoomData().idplayer)n.kickedFromRoom();else{var i=this.membersArrayToMap(t.members,t.lobbyid);n.setMembersData(i),renderLobbyMembers(i,lobby.getRoomData().idadmin),renderEventMessage({msg:t.msg,date:new Date,idplayer:t.playerid,nick:t.nick}),checkLobbyHasAllPremium()}},LobbyWS.prototype.lobbyMemberJoin=function(e,t){var n=lobby.getRoom(),i=this.membersArrayToMap(t.members,t.lobbyid);n.setMembersData(i),browserNotification(NFT_JOIN.replace("%nick%",t.nick)),renderLobbyMembers(i,lobby.getRoomData().idadmin),renderEventMessage({msg:t.msg,date:new Date,idplayer:t.playerid,nick:t.nick}),checkLobbyHasAllPremium()},LobbyWS.prototype.lobbyMemberLeft=function(e,t){var n=lobby.getRoom();if(t.playerid!=n.getRoomData().idplayer){var i=this.membersArrayToMap(t.members,t.lobbyid);n.setMembersData(i),renderLobbyMembers(i,lobby.getRoomData().idadmin),renderEventMessage({msg:t.msg,date:new Date,idplayer:t.playerid,nick:t.nick}),checkLobbyHasAllPremium()}},LobbyWS.prototype.lobbyExpire=function(e,t){!t.preReady&&checkLobbyOn()&&lobbyOn.lobby.lobbyID==t.lobbyid&&(errorAlert(LOBBY_EXPIRED),browserNotification(LOBBY_EXPIRED),renderLobby(!1),lobby.getRoom().stop())},LobbyWS.prototype.lobbyRemove=function(e,t){!t.preReady&&checkLobbyOn()&&lobbyOn.lobby.lobbyID==t.lobbyid&&(lobby.getRoomData().hasAdmin||(errorAlert(LOBBY_TERMINATED),browserNotification(LOBBY_TERMINATED),renderLobby(!1),lobby.getRoom().stop())),removeFromLobbyList(t.lobbyid,t.preReady)},LobbyWS.prototype.lobbyRemoveGame=function(e,t){removeFromInLobbyList(t.gameid,!0)},LobbyWS.prototype.lobbyFinishGame=function(e,t){finishedGameRoom(t.gameid)},LobbyWS.prototype.lobbyInGame=function(e,t){addToInLobbyList({gameID:t.gameid,lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid},t.date)},LobbyWS.prototype.lobbyLiveGame=function(e,t){removeFromInLobbyList(t.gameid,!1)},LobbyWS.prototype.lobbyUpdateMMPlayers=function(e,t){updatePlayNowNumPlayers(t.total,t.type)},LobbyWS.prototype.lobbyInviteChallenge=function(e,t){switch(t.status){case 0:challengeNew({lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid});break;case 1:challengeAccepted({lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid}),playSound("onChallengeAccepted");break;case 2:challengeDeclined({lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid});break;case 3:console.log("inviteChallengeConfirmed",t);break;case 4:challengeCanceled({lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid});break;default:challengeCanceled({lobbyID:t.lobbyid,lobbyChallengedID:t.challengedid})}},LobbyWS.prototype.invitedToLobby=function(e,t){lobbyOn!==!1&&lobbyOn.lobby.lobbyID==t.lobbyid&&renderInviteEvent({idfriend:t.friend.id,nick:t.friend.nick,date:(new Date).toISOString()},LINVITED)},LobbyWS.prototype.inviteToLobbyCanceled=function(e,t){lobbyOn!==!1&&lobbyOn.lobby.lobbyID==t.lobbyid&&(renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_CANCELED),lobbyOn.lobby.idadmin==t.playerid&&restoreInvite(t.friendid))},LobbyWS.prototype.inviteToLobbyAccepted=function(e,t){lobbyOn!==!1&&lobbyOn.lobby.lobbyID==t.lobbyid&&(renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_ACCEPTED),lobbyOn.lobby.idadmin==t.playerid&&restoreInvite(t.friendid))},LobbyWS.prototype.inviteToLobbyRefused=function(e,t){lobbyOn!==!1&&lobbyOn.lobby.lobbyID==t.lobbyid&&(renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_REFUSED),lobbyOn.lobby.idadmin==t.playerid&&restoreInvite(t.friendid))},LobbyWS.prototype.inviteToLobbyExpired=function(e,t){lobbyOn!==!1&&lobbyOn.lobby.lobbyID==t.lobbyids[0]&&("refused"==t.mode?renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_REFUSED):"offline"==t.mode?renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_EXPIRED_OFF):renderInviteEvent({idfriend:t.friendid,nick:t.friendNick,date:(new Date).toISOString()},LINVITE_EXPIRED_GAME),lobbyOn.lobby.idadmin==PLAYERID&&lobbyOn.lobby.lobbyID==t.lobbyids[0]&&restoreInvite(t.friendid))},LobbyWS.prototype.membersArrayToMap=function(e,t){var n={};return e.forEach(function(e){n[e.id]={idplayer:e.id,nick:e.nick,avatar:e.avatar,country:e.country,level:e.level,isPremium:e.isPremium,isPlus:e.isPlus,isArgentina:e.isArgentina,sub_patente_name:e.patenteName,patente_image:e.patenteImage,reputation:e.reputation,kdr:e.kdr,idlobby_room:t,idstatus:e.status,position:e.position,gamingRole:e.position,isCommonUser:e.isCommonUser,medalha_id:e.medalhaId,medalha_name:e.medalhaName,medalha_level:e.medalhaLevel}}),n},LobbyWS.prototype.lobbyPreReadyStart=function(e,t){t.players.indexOf(PLAYERID)!=-1&&(waitingDialog.hide(),startPreReady(t.id,t.players,!1,t.expire,t.mm))},LobbyWS.prototype.lobbyPreReadyChange=function(e,t){t.players.indexOf(PLAYERID)!=-1&&changePreReady({room:t.id,total:t.total})},LobbyWS.prototype.lobbyPreReadyFail=function(e,t){t.players.indexOf(PLAYERID)!=-1&&(t.error?preReadyError({room:t.id,isMM:t.mm,error:t.msg}):preReadyExpiredEnd({roomID:t.id,kicks:t.kicks,isMM:t.mm}))},LobbyWS.prototype.lobbyComplete=function(e,t){t.hide?console.log("HIDE COMPLETE"):console.log("SHOW COMPLETE")},LobbyWS.prototype.lobbyDebugConsole=function(e,t){console.log("Debug LobbyWS",t)};var LatencyWS=function(e){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.reconnect=!1,this.token=!1,this.latencySockets={},this.latencySocketsConnected=[],this.init()};LatencyWS.prototype.language={socket:{none:"WebsocketGC is needed for LatencyWS"}},LatencyWS.prototype.init=function(){$(this.socket).on("authenticated",this.authenticated.bind(this)),$(this.socket).on("disconnected",this.disconnected.bind(this)),$(this.socket).on("joinLobby",this.startLatencyChecks.bind(this)),$(this.socket).on("leaveLobby",this.endLatencyChecks.bind(this))},LatencyWS.prototype.startLatencyCheck=function(e,t){this.token?this.latencySocketsConnected[e]?console.info("Latency "+e+" already connected"):(this.latencySockets[e]=new WebSocket("wss://"+t),this.latencySockets[e].onopen=function(t){this.latencySocketsConnected[e]=!0}.bind(this),this.latencySockets[e].onclose=function(t){this.latencySocketsConnected[e]=!1}.bind(this),this.latencySockets[e].onmessage=function(t){"login"==t.data?this.latencySockets[e].send(this.token):"logged"==t.data?console.info("Logged in "+e):this.latencySockets[e].send(t.data)}.bind(this)):console.error("Unauthorized socket connection")},LatencyWS.prototype.authenticated=function(){this.token=window.localStorage.getItem(this.socket.localStorageKey)},LatencyWS.prototype.startLatencyChecks=function(){this.startLatencyCheck("br1","ws.gamersclub.com.br:5000/ws"),this.startLatencyCheck("ar1","ws2.gamersclub.com.br:5000/ws"),this.startLatencyCheck("br2","ws3.gamersclub.com.br:5000/ws")},LatencyWS.prototype.endLatencyChecks=function(){for(var e in this.latencySockets)this.latencySockets[e].close(),delete this.latencySocketsConnected[e],delete this.latencySockets[e]},LatencyWS.prototype.disconnected=function(){this.reconnect=!0};var ChatWS=function(e){if("undefined"==typeof e)throw new Error(this.language.socket.none);this.socket=e,this.reconnect=!1,this.init()};ChatWS.prototype.language={socket:{none:"WebsocketGC is needed for ChatWS"}},ChatWS.prototype.init=function(){$(this.socket).on("authenticated",this.authenticated.bind(this)),$(this.socket).on("disconnected",this.disconnected.bind(this)),$(this.socket).on("chatData",this.chatData.bind(this))},ChatWS.prototype.sendChat=function(e,t){this.socket.sendCmd("chatdata",{event:e,data:t})},ChatWS.prototype.authenticated=function(){this.reconnect&&(this.reconnect=!1)},ChatWS.prototype.disconnected=function(){this.reconnect=!0},ChatWS.prototype.chatData=function(e,t){console.log("chatData",t)};
//# sourceMappingURL=maps/status.min.js.map
