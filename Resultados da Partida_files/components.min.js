function SimpleModal(e){var e=e?e:{},t={content:"",modalContainer:"#simple-modal",modalClass:"simple-modal",classes:[],acceptButtonClass:".sm-button-accept",cancelButtonClass:".sm-button-cancel",acceptButtonAction:function(){},cancelButtonAction:this.hide};return this.opts=Object.assign(t,e),this.isCreated()||this.create(),this}function SchedulingWidget(e){var e=e?e:{},t={};this.opts=Object.assign(t,e),this.element=document.querySelector(this.opts.element),this.timePickerTemplate=document.querySelector(this.opts.timePickerTemplate).innerHTML,this.timePickerItemTemplate=document.querySelector(this.opts.timePickerItemTemplate).innerHTML,this.timeStart=360,this.timeStep=30,this.init(),this.initTimePicker()}SimpleModal.prototype.init=function(){var e=this,t=document.querySelector(this.opts.modalContainer);this.on(t,"click",this.opts.acceptButtonClass,this.opts.acceptButtonAction),this.on(t,"click",this.opts.cancelButtonClass,this.opts.cancelButtonAction),this.on(document,"keydown","body",function(t){27===t.keyCode&&this.isCreated()&&this.isOpen()&&e.hide()})},SimpleModal.prototype.create=function(){var e=document.createElement("div");e.setAttribute("id",this.opts.modalContainer.replace(/[#.]+/g,"")),e.classList.add(this.opts.modalClass),this.opts.classes.forEach(function(t,i){e.classList.add(t)}),document.body.appendChild(e),this.init()},SimpleModal.prototype.isCreated=function(){return!!document.querySelector(this.opts.modalContainer)},SimpleModal.prototype.show=function(e){var e=e?e:this.content;document.querySelector(this.opts.modalContainer).classList.add("show"),document.querySelector(this.opts.modalContainer).innerHTML=e,this.toggleScrollbars()},SimpleModal.prototype.toggleScrollbars=function(){var e=document.body,t=document.querySelector(this.opts.modalContainer),i=t.children[0].offsetHeight;this.isOpen()?"hidden"==e.style.overflowY?(e.style.overflowY="scroll",t.style.overflowY="hidden"):i>window.innerHeight?(e.style.overflowY="hidden",t.style.overflowY="scroll"):(e.style.overflowY="hidden",e.style.overflowY="hidden"):(e.style.overflowY="scroll",t.style.overflowY="hidden")},SimpleModal.prototype.hide=function(){document.querySelector(this.opts.modalContainer).classList.remove("show"),this.toggleScrollbars()},SimpleModal.prototype.destroy=function(){document.querySelector(this.opts.modalContainer).classList.remove("show"),document.querySelector(this.opts.modalContainer).innerHTML="",this.content=null},SimpleModal.prototype.getModal=function(){return document.querySelector(this.opts.modalContainer)},SimpleModal.prototype.toggle=function(){document.querySelector(this.opts.modalContainer).classList.toggle("show")},SimpleModal.prototype.isOpen=function(){return!!document.querySelector(this.opts.modalContainer).classList.contains("show")},SimpleModal.prototype.on=function(e,t,i,o){var n=this;e.addEventListener(t,function(e){for(var t=e.target;t&&t!==this;)t.matches(i)&&o.bind(n).call(t,e),t=t.parentNode})},SchedulingWidget.prototype.init=function(){var e=this;this.on(this.element,"click",".add-time-button",function(e){e.preventDefault();var t=this.parentElement.parentElement,i=t.querySelector(".time-picker");i.classList.contains("show")?t.querySelector(".time-picker").classList.remove("show"):t.querySelector(".time-picker").classList.add("show")}),this.on(this.element,"click",".time-picker .close",function(t){t.preventDefault(),e.closeTimePicker(this.parentElement)}),this.on(this.element,"click",".time-picker .add-time",function(t){t.preventDefault();var i=this.parentElement,o=this.parentElement.parentElement.parentElement.dataset.weekday,n=i.querySelector(".input-begin").value,s=i.querySelector(".input-end").value,r=e.validateInput(n,s,o);return r===!0?e.addTime.call(e,n,s,o,this):void alert(r)}),this.on(this.element,"mouseover",".scheduling-item",function(e){e.preventDefault();var t=this.querySelector(".delete-item");t.classList.add("show")}),this.on(this.element,"mouseout",".scheduling-item",function(e){e.preventDefault();var t=this.querySelector(".delete-item");t.classList.remove("show")}),this.on(this.element,"click",".scheduling-item .delete-item",function(t){t.preventDefault();var i=this.parentElement.parentElement,o=this.parentElement,n=o.dataset.control,s=e.element.querySelector(".scheduled-hours"),r=e.element.querySelector(".scheduled-hours ."+n);s.removeChild(r),i.removeChild(o)})},SchedulingWidget.prototype.initTimePicker=function(){var e=this.element.querySelectorAll(".time-picker"),t=this.timePickerTemplate,i=this.getHours();e.forEach(function(e,o){Mustache.parse(t);var n=Mustache.render(t,{hours:i});e.innerHTML=n})},SchedulingWidget.prototype.closeTimePicker=function(e){e.classList.remove("show")},SchedulingWidget.prototype.getProportions=function(e,t){var i=document.querySelector(".scheduling-widget .scheduling").offsetWidth,o=(i/48).toFixed(4),n=(e-this.timeStart)/this.timeStep,s=Math.ceil(n*o),r=(t-e)/this.timeStep,l=Math.ceil((1770==t?r+1:r)*o);return{left:s,width:l,multiplier:r}},SchedulingWidget.prototype.getHours=function(){var e=[],t=this.timeStart;for(i=1;i<=48;i++){var o=new Date("1970-01-01T00:00:00");o.setMinutes(t),e.push({time:t,label:this.getFormattedHour(t)}),t+=this.timeStep}return e},SchedulingWidget.prototype.addTime=function(e,t,i,o){var n=this.getProportions(e,t),s=o.parentNode.parentNode.querySelector(".scheduling"),r=this.timePickerItemTemplate;Mustache.parse(r);var l=Mustache.render(r,{begin:this.getFormattedHour(e),end:this.getFormattedHour(t),scheduling_control:"scheduling-"+e+t+i,show_label:n.multiplier>7}),c=this.stringToDom(l);c.style.left=n.left+"px",c.style.width=n.width+"px",s.appendChild(c),this.addTimeFields(e,t,i),this.closeTimePicker(o.parentNode)},SchedulingWidget.prototype.addTimeFields=function(e,t,i){var o=document.createElement("input"),n=this.element.querySelector(".scheduled-hours");o.setAttribute("type","hidden"),o.setAttribute("class","scheduling-"+e+t+i+" weekday-"+i),o.setAttribute("name","scheduledHours["+i+"][]"),o.setAttribute("value",e+"|"+t),n.appendChild(o)},SchedulingWidget.prototype.checkConflictingHours=function(e,t,i){var o=this.element.querySelectorAll(".scheduled-hours input.weekday-"+i),n=!1;return o.forEach(function(i,o){var s=i.value.split("|");(e==s[0]||t==s[1]||e>s[0]&&e<s[1]||t>s[0]&&t<s[1])&&(n=!0)}),n},SchedulingWidget.prototype.validateInput=function(e,t,i){var e=parseInt(e),t=parseInt(t);return e===t?SCHEDULING_WIDGET_ERROR_SAME_TIME:t<e?SCHEDULING_WIDGET_ERROR_END_BIGGER_THAN:!this.checkConflictingHours(e,t,i)||SCHEDULING_WIDGET_ERROR_TIME_CONFLICT},SchedulingWidget.prototype.getFormattedHour=function(e){var t=new Date("1970-01-01T00:00:00");t.setMinutes(e);var i=t.getHours().toString().length<2?"0"+t.getHours():t.getHours(),e=t.getMinutes().toString().length<2?"0"+t.getMinutes():t.getMinutes();return i+":"+e},SchedulingWidget.prototype.stringToDom=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},SchedulingWidget.prototype.on=function(e,t,i,o){e.addEventListener(t,function(e){for(var t=e.target;t&&t!==this;)t.matches(i)&&o.call(t,e),t=t.parentNode})};
//# sourceMappingURL=maps/components.min.js.map
